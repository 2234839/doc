<!DOCTYPE html>
<html lang="zh_CN" data-theme-mode="light" data-light-theme="daylight" data-dark-theme="midnight">
<head>
  
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"/>
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  <link rel="stylesheet" type="text/css" id="baseStyle" href="https://fastly.jsdelivr.net/gh/siyuan-note/oceanpress@main/apps/frontend/public/notebook/stage/build/export/base.css?2.10.5"/>
  <script>
  function isNightTime() {
    const currentHour = new Date().getHours();
    return currentHour >= 18 || currentHour < 6;
  }
  document.write('<link rel="stylesheet" type="text/css" id="themeDefaultStyle" href="https://fastly.jsdelivr.net/gh/siyuan-note/oceanpress@main/apps/frontend/public/notebook/appearance/themes/'+(isNightTime()?'midnight':'daylight')+'/theme.css?2.10.5"/>');
  </script>
  <link rel="stylesheet" type="text/css" href="https://fastly.jsdelivr.net/gh/siyuan-note/oceanpress@main/apps/frontend/public/notebook/appearance/oceanpress.css"/>
  <title>任意应用输入框内引用实现记录</title>
</head>
<body>
  
  <div class="protyle-wysiwyg protyle-wysiwyg--attr" id="preview">
  <div style="min-height: 150px;" id="20210326102459-nrdlzel" data-node-id="20210326102459-nrdlzel" data-type="NodeDocument" updated="20210326102459" data-subtype="h1" class="h1" type="doc"></div><div id="20210326102459-nrdlzel" data-node-id="20210326102459-nrdlzel" data-type="NodeDocument" updated="20210326102459" data-subtype="h1" class="h1" type="doc" data-type="NodeHeading" class="h1">任意应用输入框内引用实现记录</div><div id="20210326102508-w823rbb" data-node-id="20210326102508-w823rbb" data-type="NodeBlockquote" updated="20210326102601" class="bq">
<div id="20210326102601-vy4dhg1" data-node-id="20210326102601-vy4dhg1" data-type="NodeParagraph" updated="20210326102623" class="p">起源： 
<span data-type="block-ref"     data-subtype="d"     data-id="20210325154235-xo42dww">
          <a href="./../other/思源畅想-任意应用输入框内块引用.html#20210325154235-xo42dww">思源畅想-任意应用输入框内块引用</a>
  </span>
</div>
</div>
<div id="20210326221747-bawluvr" data-node-id="20210326221747-bawluvr" data-type="NodeHeading" updated="20210326221751" data-subtype="h2" class="h2"><div>
日程
</div></div>
<div id="20210326221751-ksbro0k" data-node-id="20210326221751-ksbro0k" data-type="NodeList" updated="20210329204225" data-subtype="o" class="list" data-marker="1"><div id="20210326221823-omrfi8d" data-node-id="20210326221823-omrfi8d" data-type="NodeListItem" data-subtype="o" class="li" data-marker="1">
      <div class="protyle-action">
        1
      </div>
      <div id="20210326221823-iuwg0fn" data-node-id="20210326221823-iuwg0fn" data-type="NodeParagraph" updated="20210326221901" class="p">2021/3/24 : 提出
<span data-type="block-ref"     data-subtype="d"     data-id="20210325154235-xo42dww">
          <a href="./../other/思源畅想-任意应用输入框内块引用.html#20210325154235-xo42dww">思源畅想-任意应用输入框内块引用</a>
  </span>
</div>

    </div>
<div id="20210326221824-18dm1pk" data-node-id="20210326221824-18dm1pk" data-type="NodeListItem" data-subtype="o" class="li" data-marker="2">
      <div class="protyle-action">
        2
      </div>
      <div id="20210326221824-mu7h9zd" data-node-id="20210326221824-mu7h9zd" data-type="NodeParagraph" updated="20210326221919" class="p">2021/3/25 : 完善想法、决定实施 
<span data-type="block-ref"     data-subtype="d"     data-id="20210326102459-nrdlzel">
          <a href="./../other/任意应用输入框内引用实现记录.html#20210326102459-nrdlzel">任意应用输入框内引用实现记录</a>
  </span>
</div>
<div id="20210326221929-929baq5" data-node-id="20210326221929-929baq5" data-type="NodeList" data-subtype="o" class="list" data-marker="1"><div id="20210326221928-r59ucty" data-node-id="20210326221928-r59ucty" data-type="NodeListItem" data-subtype="o" class="li" data-marker="1">
      <div class="protyle-action">
        1
      </div>
      <div id="20210326221928-51xcbt2" data-node-id="20210326221928-51xcbt2" data-type="NodeParagraph" updated="20210326221928" class="p"><a href="https://github.com/2234839/quote/commit/b5b4eca2a97a05430194e013d6b6073dec3f1396">✨feat(input-hook): N-API hello word</a>
</div>

    </div>
</div>

    </div>
<div id="20210326222528-9ndmzh6" data-node-id="20210326222528-9ndmzh6" data-type="NodeListItem" data-subtype="o" class="li" data-marker="3">
      <div class="protyle-action">
        3
      </div>
      <div id="20210326222527-hue9jc6" data-node-id="20210326222527-hue9jc6" data-type="NodeParagraph" updated="20210326222726" class="p">2021/3/26 : 在搜索引擎上泡了一天，取得了不理想的进展
</div>
<div id="20210326222618-vqr0dl7" data-node-id="20210326222618-vqr0dl7" data-type="NodeList" data-subtype="o" class="list" data-marker="1"><div id="20210326222617-ocoha3l" data-node-id="20210326222617-ocoha3l" data-type="NodeListItem" data-subtype="o" class="li" data-marker="1">
      <div class="protyle-action">
        1
      </div>
      <div id="20210326222617-s8f8eka" data-node-id="20210326222617-s8f8eka" data-type="NodeParagraph" class="p"><a href="https://github.com/2234839/quote/commit/3bd2640aa4a8e82a9f17e0f0b4972959461b63f2">✨feat(input-hook): 获取部分应用的插入符位置成功</a>
</div>

    </div>
<div id="20210326222711-hy688n8" data-node-id="20210326222711-hy688n8" data-type="NodeListItem" data-subtype="o" class="li" data-marker="2">
      <div class="protyle-action">
        2
      </div>
      <div id="20210326222711-dr4b74q" data-node-id="20210326222711-dr4b74q" data-type="NodeParagraph" updated="20210326222711" class="p">也许需要考虑在最差的情况下降级到监听触发后弹出输入框让用户在该 app 内输入选择然后再填充到原来的应用
</div>

    </div>
<div id="20210326222729-i5x8obm" data-node-id="20210326222729-i5x8obm" data-type="NodeListItem" data-subtype="o" class="li" data-marker="3">
      <div class="protyle-action">
        3
      </div>
      <div id="20210326222729-nhoypcj" data-node-id="20210326222729-nhoypcj" data-type="NodeParagraph" updated="20210326223019" class="p">明天打算先实现 
<span data-type="block-ref"     data-subtype="d"     data-id="20210326222711-hy688n8">
          <a href="./../other/任意应用输入框内引用实现记录.html#20210326222711-hy688n8">也许需要考虑在最差的情况下降级到监听触发后弹出输入框让用户在该 app 内输入选择然后再填充到原来的应用</a>
  </span>
 ，至于本来设想的直接在原生输入框内输入文本就能有提示的想法先搁置吧，对 win32 太不熟了，这玩意实现起来会很脏很花时间，以后再说
</div>

    </div>
</div>

    </div>
<div id="20210327093056-g380qo0" data-node-id="20210327093056-g380qo0" data-type="NodeListItem" data-subtype="o" class="li" data-marker="4">
      <div class="protyle-action">
        4
      </div>
      <div id="20210327093055-sqgdze3" data-node-id="20210327093055-sqgdze3" data-type="NodeParagraph" updated="20210327204117" class="p">2021/3/27 : 悲观的前景，或许只能作为一个搜索工具来用了，达不到 
<span data-type="block-ref"     data-subtype="d"     data-id="20210325154235-xo42dww">
          <a href="./../other/思源畅想-任意应用输入框内块引用.html#20210325154235-xo42dww">思源畅想-任意应用输入框内块引用</a>
  </span>
 中所想的那样直接在输入框内 
<span data-type="code">【【text </span>
即可搜索的效果了
</div>
<div id="20210327093103-zh6sz3u" data-node-id="20210327093103-zh6sz3u" data-type="NodeList" data-subtype="o" class="list" data-marker="1"><div id="20210327093102-m07xdjz" data-node-id="20210327093102-m07xdjz" data-type="NodeListItem" data-subtype="o" class="li" data-marker="1">
      <div class="protyle-action">
        1
      </div>
      <div id="20210327093102-ddrz0ct" data-node-id="20210327093102-ddrz0ct" data-type="NodeParagraph" updated="20210327093108" class="p"><span data-type="block-ref"     data-subtype="d"     data-id="20210327093006-7676fcr">
          <a href="./../other/任意应用输入框内引用实现记录.html#20210327093006-7676fcr">解决方案： ✨feat(app): fix electron build error</a>
  </span>
</div>

    </div>
<div id="20210327203555-c778bd8" data-node-id="20210327203555-c778bd8" data-type="NodeListItem" data-subtype="o" class="li" data-marker="2">
      <div class="protyle-action">
        2
      </div>
      <div id="20210327203555-u44rh9e" data-node-id="20210327203555-u44rh9e" data-type="NodeParagraph" updated="20210327203555" class="p"><a href="https://github.com/2234839/quote/commit/7cb756b071480b9d78062b8f1362a7d35d94bc0f">✨feat(app): 实现简单的界面，接入思源搜索api</a>
</div>

    </div>
<div id="20210327203602-yxd1gig" data-node-id="20210327203602-yxd1gig" data-type="NodeListItem" data-subtype="o" class="li" data-marker="3">
      <div class="protyle-action">
        3
      </div>
      <div id="20210327203602-2w7wq9a" data-node-id="20210327203602-2w7wq9a" data-type="NodeParagraph" updated="20210327203602" class="p"><a href="https://github.com/2234839/quote/commit/e5ddef779254f60a6bd6e75da925d8201e778885">✨feat(app): 引入 robotjs 初步完成切换到之前的应用程序与粘贴功能</a>
</div>

    </div>
<div id="20210327203615-8esak7d" data-node-id="20210327203615-8esak7d" data-type="NodeListItem" data-subtype="o" class="li" data-marker="4">
      <div class="protyle-action">
        4
      </div>
      <div id="20210327203615-jqoswly" data-node-id="20210327203615-jqoswly" data-type="NodeParagraph" updated="20210327203615" class="p"><a href="https://github.com/2234839/quote/commit/26575b8abb74bf3d4a58d0a144a8808f5659dc44">✨feat(app): 通过模拟按键来读取当前输入内容</a>
</div>
<div id="20210327203627-v4fpngy" data-node-id="20210327203627-v4fpngy" data-type="NodeList" data-subtype="o" class="list" data-marker="1"><div id="20210327203626-dceujdr" data-node-id="20210327203626-dceujdr" data-type="NodeListItem" data-subtype="o" class="li" data-marker="1">
      <div class="protyle-action">
        1
      </div>
      <div id="20210327203626-hr1odlr" data-node-id="20210327203626-hr1odlr" data-type="NodeParagraph" updated="20210327203853" class="p">或许要考虑使用快捷键来主动触发查询了，直接获取用户输入目前没有想到一个可行的方案
</div>

    </div>
</div>

    </div>
</div>

    </div>
<div id="20210329204213-7pvtz15" data-node-id="20210329204213-7pvtz15" data-type="NodeListItem" data-subtype="o" class="li" data-marker="5">
      <div class="protyle-action">
        5
      </div>
      <div id="20210329204211-15536mh" data-node-id="20210329204211-15536mh" data-type="NodeParagraph" updated="20210330081111" class="p">2021/3/29 :
</div>
<div id="20210329204215-qmi3nhk" data-node-id="20210329204215-qmi3nhk" data-type="NodeList" data-subtype="o" class="list" data-marker="1"><div id="20210329204215-u7noekp" data-node-id="20210329204215-u7noekp" data-type="NodeListItem" data-subtype="o" class="li" data-marker="1">
      <div class="protyle-action">
        1
      </div>
      <div id="20210329204215-2yp1bz6" data-node-id="20210329204215-2yp1bz6" data-type="NodeParagraph" updated="20210329204342" class="p">遇到 
<span data-type="block-ref"     data-subtype="d"     data-id="20210327075933-h37zbwt">
          <a href="./../record/每日总结/2021/3月.html#20210327075933-h37zbwt">electron-vue-next</a>
  </span>
 的一个坑： 
<a href="https://github.com/ci010/electron-vue-next/issues/49">electron.ipcRenderer.on is undefined</a>
</div>

    </div>
<div id="20210330081114-84p3asf" data-node-id="20210330081114-84p3asf" data-type="NodeListItem" data-subtype="o" class="li" data-marker="2">
      <div class="protyle-action">
        2
      </div>
      <div id="20210330081114-y4sqz39" data-node-id="20210330081114-y4sqz39" data-type="NodeParagraph" updated="20210428105916" class="p"><span data-type="block-ref"     data-subtype="d"     data-id="20210330075700-7dekwqy">
          <a href="./../other/electron icp 封装（基于vue computed）.html#20210330075700-7dekwqy">electron icp 封装（基于vue computed）</a>
  </span>
</div>

    </div>
</div>

    </div>
</div>
<div id="20210325155044-2y0lnwv" data-node-id="20210325155044-2y0lnwv" data-type="NodeHeading" updated="20210326221747" data-subtype="h2" class="h2"><div>
实现思路
</div></div>
<div id="20210325202629-yef3pqm" data-node-id="20210325202629-yef3pqm" data-type="NodeList" updated="20210326221137" data-subtype="u" class="list" data-marker="-"><div id="20210325202632-kdeakxo" data-node-id="20210325202632-kdeakxo" data-type="NodeListItem" data-subtype="u" class="li" data-marker="-">
      <div class="protyle-action">
        <svg><use xlink:href="#iconDot"></use></svg>
      </div>
      <div id="20210325202632-8cxirg3" data-node-id="20210325202632-8cxirg3" data-type="NodeParagraph" updated="20210325202639" class="p">监听用户按键
</div>
<div id="20210325212640-zl768s4" data-node-id="20210325212640-zl768s4" data-type="NodeList" data-subtype="u" class="list" data-marker="-"><div id="20210325212640-hmuiw91" data-node-id="20210325212640-hmuiw91" data-type="NodeListItem" data-subtype="u" class="li" data-marker="-">
      <div class="protyle-action">
        <svg><use xlink:href="#iconDot"></use></svg>
      </div>
      <div id="20210325212640-0w6jt65" data-node-id="20210325212640-0w6jt65" data-type="NodeParagraph" updated="20210325212702" class="p"><a href="https://wilix-team.github.io/iohook/os-support.html">iohook 这个库可以监听按键</a>
</div>

    </div>
<div id="20210326102634-fbtfnmt" data-node-id="20210326102634-fbtfnmt" data-type="NodeListItem" data-subtype="u" class="li" data-marker="-">
      <div class="protyle-action">
        <svg><use xlink:href="#iconDot"></use></svg>
      </div>
      <div id="20210326102634-z80lkim" data-node-id="20210326102634-z80lkim" data-type="NodeParagraph" updated="20210326102654" class="p">c++ 通过 win32 api 监听，N-API 包装
</div>

    </div>
</div>

    </div>
<div id="20210325202641-ww360ls" data-node-id="20210325202641-ww360ls" data-type="NodeListItem" data-subtype="u" class="li" data-marker="-">
      <div class="protyle-action">
        <svg><use xlink:href="#iconDot"></use></svg>
      </div>
      <div id="20210325202641-7qfge3q" data-node-id="20210325202641-7qfge3q" data-type="NodeParagraph" updated="20210325202744" class="p">读取输入框内容，从后向前获取一定长度文本
</div>
<div id="20210326150644-8xnbiu4" data-node-id="20210326150644-8xnbiu4" data-type="NodeList" data-subtype="u" class="list" data-marker="-"><div id="20210326150644-pbohk4c" data-node-id="20210326150644-pbohk4c" data-type="NodeListItem" data-subtype="u" class="li" data-marker="-">
      <div class="protyle-action">
        <svg><use xlink:href="#iconDot"></use></svg>
      </div>
      <div id="20210326150644-dekfwey" data-node-id="20210326150644-dekfwey" data-type="NodeParagraph" updated="20210326150654" class="p">这一步的难度比想象的大
</div>
<div id="20210326150655-9mmuw3u" data-node-id="20210326150655-9mmuw3u" data-type="NodeList" data-subtype="u" class="list" data-marker="-"><div id="20210326150654-ysyjpoh" data-node-id="20210326150654-ysyjpoh" data-type="NodeListItem" data-subtype="u" class="li" data-marker="-">
      <div class="protyle-action">
        <svg><use xlink:href="#iconDot"></use></svg>
      </div>
      <div id="20210326150654-6m5b00i" data-node-id="20210326150654-6m5b00i" data-type="NodeParagraph" updated="20210326150702" class="p">或许可以参照输入法的实现
</div>
<div id="20210326151824-vn99qge" data-node-id="20210326151824-vn99qge" data-type="NodeList" data-subtype="u" class="list" data-marker="-"><div id="20210326151824-xz5z959" data-node-id="20210326151824-xz5z959" data-type="NodeListItem" data-subtype="u" class="li" data-marker="-">
      <div class="protyle-action">
        <svg><use xlink:href="#iconDot"></use></svg>
      </div>
      <div id="20210326151824-st2ndu9" data-node-id="20210326151824-st2ndu9" data-type="NodeParagraph" updated="20210326151835" class="p">输入法是怎么知道输入框的位置的？
</div>

    </div>
<div id="20210326152450-zng4h2u" data-node-id="20210326152450-zng4h2u" data-type="NodeListItem" data-subtype="u" class="li" data-marker="-">
      <div class="protyle-action">
        <svg><use xlink:href="#iconDot"></use></svg>
      </div>
      <div id="20210326152450-m4mmh8e" data-node-id="20210326152450-m4mmh8e" data-type="NodeParagraph" updated="20210326152524" class="p"><a href="https://stackoverflow.com/questions/66812570/how-can-i-get-the-location-and-content-of-the-input-box-i-am-typing-in-under-win">在 stackoverflow 求助网友</a>
</div>

    </div>
</div>

    </div>
</div>

    </div>
<div id="20210326180029-raszsoj" data-node-id="20210326180029-raszsoj" data-type="NodeListItem" data-subtype="u" class="li" data-marker="-">
      <div class="protyle-action">
        <svg><use xlink:href="#iconDot"></use></svg>
      </div>
      <div id="20210326153215-jvtt8z1" data-node-id="20210326153215-jvtt8z1" data-type="NodeParagraph" updated="20210326153303" class="p">获取插入符（就是一闪一闪的那个光标）位置
</div>
<div id="20210326170601-igq0y1k" data-node-id="20210326170601-igq0y1k" data-type="NodeList" data-subtype="u" class="list" data-marker="-"><div id="20210326153217-p2rrgse" data-node-id="20210326153217-p2rrgse" data-type="NodeListItem" data-subtype="u" class="li" data-marker="-">
      <div class="protyle-action">
        <svg><use xlink:href="#iconDot"></use></svg>
      </div>
      <div id="20210326180029-kuxhzxt" data-node-id="20210326180029-kuxhzxt" data-type="NodeParagraph" class="p"><a href="https://docs.microsoft.com/zh-cn/windows/win32/api/winuser/nf-winuser-getcaretpos?redirectedfrom=MSDN">GetCaretPos function (winuser.h) - Win32 apps | Microsoft Docs</a>
</div>
<div id="20210326180032-frmmhy0" data-node-id="20210326180032-frmmhy0" data-type="NodeList" data-subtype="u" class="list" data-marker="-"><div id="20210326180032-dl42adp" data-node-id="20210326180032-dl42adp" data-type="NodeListItem" data-subtype="u" class="li" data-marker="-">
      <div class="protyle-action">
        <svg><use xlink:href="#iconDot"></use></svg>
      </div>
      <div id="20210326180032-8yyz8pv" data-node-id="20210326180032-8yyz8pv" data-type="NodeParagraph" updated="20210326180043" class="p">这个好像只能在自己的窗口内使用
</div>

    </div>
</div>

    </div>
<div id="20210326170601-624e4xo" data-node-id="20210326170601-624e4xo" data-type="NodeListItem" data-subtype="u" class="li" data-marker="-">
      <div class="protyle-action">
        <svg><use xlink:href="#iconDot"></use></svg>
      </div>
      <div id="20210326170601-tn9f5p3" data-node-id="20210326170601-tn9f5p3" data-type="NodeParagraph" updated="20210326180443" class="p">使用 
<a href="https://docs.microsoft.com/en-us/windows/win32/api/winuser/nf-winuser-getguithreadinfo">GetGUIThreadInfo</a>
</div>
<div id="20210326180447-ao0knmm" data-node-id="20210326180447-ao0knmm" data-type="NodeList" data-subtype="u" class="list" data-marker="-"><div id="20210326180446-cinu8ie" data-node-id="20210326180446-cinu8ie" data-type="NodeListItem" data-subtype="u" class="li" data-marker="-">
      <div class="protyle-action">
        <svg><use xlink:href="#iconDot"></use></svg>
      </div>
      <div id="20210326180446-vakvpfq" data-node-id="20210326180446-vakvpfq" data-type="NodeParagraph" updated="20210326180446" class="p">一个成功获取插入符坐标的实例 
<a href="https://bbs.pediy.com/thread-61157.htm">https://bbs.pediy.com/thread-61157.htm</a>
</div>

    </div>
<div id="20210326180448-mb8a6wx" data-node-id="20210326180448-mb8a6wx" data-type="NodeListItem" data-subtype="u" class="li" data-marker="-">
      <div class="protyle-action">
        <svg><use xlink:href="#iconDot"></use></svg>
      </div>
      <div id="20210326180448-1plexsr" data-node-id="20210326180448-1plexsr" data-type="NodeParagraph" updated="20210326180549" class="p"><a href="https://social.msdn.microsoft.com/Forums/vstudio/en-US/fe948416-9c28-419e-8bf1-0b3a78a45e46?forum=visualcpluszhchs">这里有一份更精简的代码</a>
</div>

    </div>
<div id="20210326215917-89mh8oo" data-node-id="20210326215917-89mh8oo" data-type="NodeListItem" data-subtype="u" class="li" data-marker="-">
      <div class="protyle-action">
        <svg><use xlink:href="#iconDot"></use></svg>
      </div>
      <div id="20210326215917-od5qxxu" data-node-id="20210326215917-od5qxxu" data-type="NodeParagraph" updated="20210326222707" class="p">这个 api 对于自绘光标的应用不行，不够完美
</div>
<div id="20210326221131-mbe9hy2" data-node-id="20210326221131-mbe9hy2" data-type="NodeList" data-subtype="u" class="list" data-marker="-"><div id="20210326221131-wdmw7c6" data-node-id="20210326221131-wdmw7c6" data-type="NodeListItem" data-subtype="u" class="li" data-marker="-">
      <div class="protyle-action">
        <svg><use xlink:href="#iconDot"></use></svg>
      </div>
      <div id="20210326221131-ohw00ap" data-node-id="20210326221131-ohw00ap" data-type="NodeParagraph" updated="20210326223052" class="p">不行： chromium 内核全不行、qq
</div>

    </div>
<div id="20210326221200-clfuk2h" data-node-id="20210326221200-clfuk2h" data-type="NodeListItem" data-subtype="u" class="li" data-marker="-">
      <div class="protyle-action">
        <svg><use xlink:href="#iconDot"></use></svg>
      </div>
      <div id="20210326221200-yhqfynb" data-node-id="20210326221200-yhqfynb" data-type="NodeParagraph" updated="20210326221224" class="p">可行：钉钉、微信、Firefox
</div>

    </div>
</div>

    </div>
</div>

    </div>
</div>

    </div>
</div>

    </div>
<div id="20210325202745-s5t2qxz" data-node-id="20210325202745-s5t2qxz" data-type="NodeListItem" data-subtype="u" class="li" data-marker="-">
      <div class="protyle-action">
        <svg><use xlink:href="#iconDot"></use></svg>
      </div>
      <div id="20210325202745-acxtzsi" data-node-id="20210325202745-acxtzsi" data-type="NodeParagraph" updated="20210325202806" class="p">判断文本是否符合模式
<span data-type="code">[[text</span>
</div>

    </div>
<div id="20210325202807-kd6l0hn" data-node-id="20210325202807-kd6l0hn" data-type="NodeListItem" data-subtype="u" class="li" data-marker="-">
      <div class="protyle-action">
        <svg><use xlink:href="#iconDot"></use></svg>
      </div>
      <div id="20210325202807-vrntzvn" data-node-id="20210325202807-vrntzvn" data-type="NodeParagraph" updated="20210325202833" class="p">通过 api 检索 text ，显示列表
</div>

    </div>
<div id="20210325202834-nmy7f9l" data-node-id="20210325202834-nmy7f9l" data-type="NodeListItem" data-subtype="u" class="li" data-marker="-">
      <div class="protyle-action">
        <svg><use xlink:href="#iconDot"></use></svg>
      </div>
      <div id="20210325202834-7ugebus" data-node-id="20210325202834-7ugebus" data-type="NodeParagraph" updated="20210325202852" class="p">移动列表到离输入框合适的地方
</div>

    </div>
<div id="20210325202901-g4luqja" data-node-id="20210325202901-g4luqja" data-type="NodeListItem" data-subtype="u" class="li" data-marker="-">
      <div class="protyle-action">
        <svg><use xlink:href="#iconDot"></use></svg>
      </div>
      <div id="20210325202901-vreed6k" data-node-id="20210325202901-vreed6k" data-type="NodeParagraph" updated="20210325202926" class="p">用户选择项目后通过 粘贴 来将文本填进去
</div>

    </div>
</div>
<div id="20210325222819-2mcycpz" data-node-id="20210325222819-2mcycpz" data-type="NodeHeading" updated="20210325222826" data-subtype="h3" class="h3"><div>
采坑记录
</div></div>
<div id="20210325224309-x7uy92g" data-node-id="20210325224309-x7uy92g" data-type="NodeList" updated="20210325224425" data-subtype="u" class="list" data-marker="-"><div id="20210325224310-aly3yav" data-node-id="20210325224310-aly3yav" data-type="NodeListItem" data-subtype="u" class="li" data-marker="-">
      <div class="protyle-action">
        <svg><use xlink:href="#iconDot"></use></svg>
      </div>
      <div id="20210325224310-ix7lykw" data-node-id="20210325224310-ix7lykw" data-type="NodeParagraph" updated="20210325224425" class="p"><a href="https://stackoverflow.com/questions/61730307/node-js-native-addons-where-is-node-api-h-located">vscode 无法找到 node_api.h</a>
</div>

    </div>
</div>
<div id="20210325222826-bndkjsm" data-node-id="20210325222826-bndkjsm" data-type="NodeList" updated="20210327174909" data-subtype="u" class="list" data-marker="-"><div id="20210325222827-mabk9in" data-node-id="20210325222827-mabk9in" data-type="NodeListItem" data-subtype="u" class="li" data-marker="-">
      <div class="protyle-action">
        <svg><use xlink:href="#iconDot"></use></svg>
      </div>
      <div id="20210325222827-a19n71a" data-node-id="20210325222827-a19n71a" data-type="NodeParagraph" updated="20210325222857" class="p">打算使用 N-API 的方式来将用户按键以及当前焦点框传给其他程序
</div>
<div id="20210325222858-b5uslmx" data-node-id="20210325222858-b5uslmx" data-type="NodeList" data-subtype="u" class="list" data-marker="-"><div id="20210325222857-df0h4b6" data-node-id="20210325222857-df0h4b6" data-type="NodeListItem" data-subtype="u" class="li" data-marker="-">
      <div class="protyle-action">
        <svg><use xlink:href="#iconDot"></use></svg>
      </div>
      <div id="20210325222857-4ngu2hh" data-node-id="20210325222857-4ngu2hh" data-type="NodeParagraph" updated="20210325223448" class="p">在走一个 N-API 的 
<a href="https://www.jianshu.com/p/6b0d60672e04">hello word 程序</a>
的时候报错 
<span data-type="code">C:\\Users\\llej\\AppData\\Local\\node-gyp\\Cache\\14.5.0\\x64\\node.lib : fatal error LNK1127: 库已损坏 [D:\code\quote\packages\i</span>
</div>

    </div>
<div id="20210325222951-t15ofra" data-node-id="20210325222951-t15ofra" data-type="NodeListItem" data-subtype="u" class="li" data-marker="-">
      <div class="protyle-action">
        <svg><use xlink:href="#iconDot"></use></svg>
      </div>
      <div id="20210325222951-s1k0cy2" data-node-id="20210325222951-s1k0cy2" data-type="NodeParagraph" updated="20210325223035" class="p">搜索了一下发现可能是 node.lib 不对劲，于是去 https://nodejs.org/download/release/v14.5.0/win-x64/ 这里下载对应版本的 node.lib
</div>
<div id="20210325223037-93e6ykg" data-node-id="20210325223037-93e6ykg" data-type="NodeList" data-subtype="u" class="list" data-marker="-"><div id="20210325223037-fzbwwga" data-node-id="20210325223037-fzbwwga" data-type="NodeListItem" data-subtype="u" class="li" data-marker="-">
      <div class="protyle-action">
        <svg><use xlink:href="#iconDot"></use></svg>
      </div>
      <div id="20210325223037-2z2cpwn" data-node-id="20210325223037-2z2cpwn" data-type="NodeParagraph" updated="20210325223050" class="p">浏览器直接打开了新标签....
</div>

    </div>
<div id="20210325223053-f4o1k6m" data-node-id="20210325223053-f4o1k6m" data-type="NodeListItem" data-subtype="u" class="li" data-marker="-">
      <div class="protyle-action">
        <svg><use xlink:href="#iconDot"></use></svg>
      </div>
      <div id="20210325223053-cid0yby" data-node-id="20210325223053-cid0yby" data-type="NodeParagraph" updated="20210325223128" class="p">F12 修改 a 标签给他加上 download 属性
</div>

    </div>
</div>

    </div>
<div id="20210325223131-c8fe3xp" data-node-id="20210325223131-c8fe3xp" data-type="NodeListItem" data-subtype="u" class="li" data-marker="-">
      <div class="protyle-action">
        <svg><use xlink:href="#iconDot"></use></svg>
      </div>
      <div id="20210325223129-q90trbx" data-node-id="20210325223129-q90trbx" data-type="NodeParagraph" updated="20210325223138" class="p">下载后替换成功编译
</div>

    </div>
<div id="20210325223158-vlcqss4" data-node-id="20210325223158-vlcqss4" data-type="NodeListItem" data-subtype="u" class="li" data-marker="-">
      <div class="protyle-action">
        <svg><use xlink:href="#iconDot"></use></svg>
      </div>
      <div id="20210325223158-x0jqdb9" data-node-id="20210325223158-x0jqdb9" data-type="NodeParagraph" updated="20210326102528" class="p"><span data-type="NodeImage" class="img" style="undefined"
      ><img
        src="./../assets/image-20210325223158-t0pehz0.png"
        data-src="./../assets/image-20210325223158-t0pehz0.png"
        title=""
        style="undefined"
        loading="lazy"
      /><span class="protyle-action__title"></span></span
    >
</div>

    </div>
</div>

    </div>
<div id="20210327083040-6z4v78n" data-node-id="20210327083040-6z4v78n" data-type="NodeListItem" data-subtype="u" class="li" data-marker="-">
      <div class="protyle-action">
        <svg><use xlink:href="#iconDot"></use></svg>
      </div>
      <div id="20210327083039-f9j6cny" data-node-id="20210327083039-f9j6cny" data-type="NodeParagraph" updated="20210327083207" class="p">electron 在使用 yarn workspace 的时候需要配置将 electron 就放在该包下面，而不是集中起来，因为他编译的时候会读取 node_modules 中 electron 的内容
</div>
<div id="20210327083207-99re5a4" data-node-id="20210327083207-99re5a4" data-type="NodeList" data-subtype="u" class="list" data-marker="-"><div id="20210327083207-twhv76h" data-node-id="20210327083207-twhv76h" data-type="NodeListItem" data-subtype="u" class="li" data-marker="-">
      <div class="protyle-action">
        <svg><use xlink:href="#iconDot"></use></svg>
      </div>
      <div id="20210327083207-hnk1gad" data-node-id="20210327083207-hnk1gad" data-type="NodeParagraph" updated="20210327083308" class="p"><a href="https://github.com/electron-userland/electron-builder/issues/3984#issuecomment-784524894">https://github.com/electron-userland/electron-builder/issues/3984#issuecomment-784524894</a>
</div>
<div id="20210327083317-atf9p45" data-node-id="20210327083317-atf9p45" data-type="NodeList" data-subtype="u" class="list" data-marker="-"><div id="20210327083316-mh7yl94" data-node-id="20210327083316-mh7yl94" data-type="NodeListItem" data-subtype="u" class="li" data-marker="-">
      <div class="protyle-action">
        <svg><use xlink:href="#iconDot"></use></svg>
      </div>
      <div id="20210327083316-k0prizg" data-node-id="20210327083316-k0prizg" data-type="NodeCodeBlock" updated="20210327083318" class="code-block">
        <div class="protyle-action">
          <span class="protyle-action--first protyle-action__language"></span>
          <span class="fn__flex-1"></span><span class="protyle-icon protyle-icon--only protyle-action__copy"><svg><use xlink:href="#iconCopy"></use></svg></span>
        </div>
        <div class="hljs" spellcheck="false">"workspaces": {
    "nohoist": [
      "electron"
    ]
  }
</div>
      </div>

    </div>
<div id="20210327090042-vh3z8cq" data-node-id="20210327090042-vh3z8cq" data-type="NodeListItem" data-subtype="u" class="li" data-marker="-">
      <div class="protyle-action">
        <svg><use xlink:href="#iconDot"></use></svg>
      </div>
      <div id="20210327090041-oeutkp0" data-node-id="20210327090041-oeutkp0" data-type="NodeParagraph" updated="20210327093001" class="p"><a href="https://github.com/yarnpkg/yarn/issues/6412">❤ Yarn workspace </a>
<a href="https://github.com/yarnpkg/yarn/issues/6412"> option does not seem to work as documentation states... · Issue #6412 · yarnpkg/yarn · GitHub</a>
<a href="undefined"><span data-type="code">nohoist</span></a>
</div>

    </div>
<div id="20210327093006-srexq5b" data-node-id="20210327093006-srexq5b" data-type="NodeListItem" data-subtype="u" class="li" data-marker="-">
      <div class="protyle-action">
        <svg><use xlink:href="#iconDot"></use></svg>
      </div>
      <div id="20210327093006-7676fcr" data-node-id="20210327093006-7676fcr" data-type="NodeParagraph" updated="20210327093046" class="p">解决方案： 
<a href="https://github.com/2234839/quote/commit/6f650e4c23f4a176cc6b13e423678b39fd1dc1a0">✨feat(app): fix electron build error</a>
</div>

    </div>
</div>

    </div>
</div>

    </div>
<div id="20210327174548-t1rug2r" data-node-id="20210327174548-t1rug2r" data-type="NodeListItem" data-subtype="u" class="li" data-marker="-">
      <div class="protyle-action">
        <svg><use xlink:href="#iconDot"></use></svg>
      </div>
      <div id="20210327174547-n4cg7xi" data-node-id="20210327174547-n4cg7xi" data-type="NodeParagraph" updated="20210327174707" class="p">使用 rebotjs 得到报错： NODE_MODULE_VERSION 83. This version of Node.js requires
​
[CONSOLE] NODE_MODULE_VERSION 85. Please try re-compiling or re-installing
​
[CONSOLE] the module (for instance, using 
<span data-type="code">npm rebuild</span>
 or 
<span data-type="code">npm install</span>
).
</div>
<div id="20210327174818-ou34myq" data-node-id="20210327174818-ou34myq" data-type="NodeList" data-subtype="u" class="list" data-marker="-"><div id="20210327174708-20bqqip" data-node-id="20210327174708-20bqqip" data-type="NodeListItem" data-subtype="u" class="li" data-marker="-">
      <div class="protyle-action">
        <svg><use xlink:href="#iconDot"></use></svg>
      </div>
      <div id="20210327174814-n0uxjbo" data-node-id="20210327174814-n0uxjbo" data-type="NodeParagraph" updated="20210327174914" class="p">是 electron 需要 rebuild，执行 
<span data-type="code">.\node_modules\.bin\electron-builder</span>
 后就行了
</div>

    </div>
</div>

    </div>
</div>
<div id="20210328124245-8tm8zlr" data-node-id="20210328124245-8tm8zlr" data-type="NodeParagraph" updated="20210328163310" class="p"></div>
<div id="20210326164836-e4eebzr" data-node-id="20210326164836-e4eebzr" data-type="NodeParagraph" updated="20210328124620" class="p"></div>
<div id="20210328124316-54dby9e" data-node-id="20210328124316-54dby9e" data-type="NodeParagraph" class="p"></div>

  </div>
  <script src="https://fastly.jsdelivr.net/gh/siyuan-note/oceanpress@main/apps/frontend/public/notebook/appearance/icons/material/icon.js?2.10.5"></script>
  <script src="https://fastly.jsdelivr.net/gh/siyuan-note/oceanpress@main/apps/frontend/public/notebook/stage/build/export/protyle-method.js?2.10.5"></script>
  <script src="https://fastly.jsdelivr.net/gh/siyuan-note/oceanpress@main/apps/frontend/public/notebook/stage/protyle/js/lute/lute.min.js?2.10.5"></script>
  <script>
    window.siyuan = {
      config: {
        appearance: {
          mode: isNightTime()?1:0,//主题 明亮=0 暗黑=1
          codeBlockThemeDark: "base16/dracula",
          codeBlockThemeLight: "github",
        },
        editor: {
          codeLineWrap: true,
          codeLigatures: false,
          plantUMLServePath: "https://www.plantuml.com/plantuml/svg/~1",
          codeSyntaxHighlightLineNum: true,
          katexMacros: JSON.stringify({}),
        },
      },
      languages: { copy: "复制" },
    };
    const cdn = "https://fastly.jsdelivr.net/gh/siyuan-note/oceanpress@main/apps/frontend/public/notebook/stage/protyle";
    const previewElement = document.getElementById("preview");

    Protyle.highlightRender(previewElement, cdn);
    Protyle.mathRender(previewElement, cdn, false);
    Protyle.mermaidRender(previewElement, cdn);
    Protyle.flowchartRender(previewElement, cdn);
    Protyle.graphvizRender(previewElement, cdn);
    Protyle.chartRender(previewElement, cdn);
    Protyle.mindmapRender(previewElement, cdn);
    Protyle.abcRender(previewElement, cdn);
    Protyle.htmlRender(previewElement);
    Protyle.plantumlRender(previewElement, cdn);
    document.querySelectorAll(".protyle-action__copy").forEach((item) => {
      item.addEventListener("click", (event) => {
        navigator.clipboard.writeText(
          item.parentElement.nextElementSibling.textContent.trimEnd(),
        );
        event.preventDefault();
        event.stopPropagation();
      });
    });
  </script>
  <footer>
<p style="text-align:center;margin:15px 0;">
  技术支持：
  <a target="_blank" href="https://github.com/2234839/oceanPress_js">OceanPress</a>|
    <a target="_blank" href="https://heartstack.space/user/%E5%AD%90%E8%99%9A/posts">崮生（子虚）</a> |
    <a target="_blank" href="//beian.miit.gov.cn">湘ICP备18021783号-1</a>
</p>
</footer>
</body>
</html>