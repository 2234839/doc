<!DOCTYPE html>
<html lang="zh_CN" data-theme-mode="light" data-light-theme="daylight" data-dark-theme="midnight">
<head>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@docsearch/css@3"/>
<style>
  .header-container {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 10px 20px;
    background-color: #f8f9fa;
    border-bottom: 1px solid #e9ecef;
  }
  .home-button {
    text-decoration: none;
    color: #007bff;
    font-weight: bold;
    font-size: 16px;
  }
  .home-button:hover {
    text-decoration: underline;
  }
  #search {
    width: 300px;
  }
</style>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"/>
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
    <meta name="description" content="逸飞的技术日志 ​ FastAPI 中的依赖注入和插件系统 published:Sat, 23 Apr 2022 01:06:29 GMT 依赖注入用于把一些可复用的逻辑抽离出来，减少代码重复。例如，返回列表的 API 中都会用到 page和 page_size 这几个参数，那么可以创建一个依赖来包含这两个参数。" />
  <meta name="keywords" content="gmt, published, sat, aug, 一个, 测试, fastapi, 文件" />
  <meta name="author" content="崮生" />
  <meta property="og:title" content="逸飞的技术日志" />
  <meta property="og:description" content="逸飞的技术日志 ​ FastAPI 中的依赖注入和插件系统 published:Sat, 23 Apr 2022 01:06:29 GMT 依赖注入用于把一些可复用的逻辑抽离出来，减少代码重复。例如，返回列表的 API 中都会用到 page和 page_size 这几个参数，那么可以创建一个依赖来包含这两个参数。" />
  <meta property="og:type" content="article" />
  <meta property="og:url" content="/文集/feed/逸飞的技术日志.html" />
  <meta property="og:site_name" content="OceanPress" />
  <meta property="article:published_time" content="2023-12-16T21:25:02Z" />
  <meta property="article:modified_time" content="2025-07-24T20:08:22Z" />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="逸飞的技术日志" />
  <meta name="twitter:description" content="逸飞的技术日志 ​ FastAPI 中的依赖注入和插件系统 published:Sat, 23 Apr 2022 01:06:29 GMT 依赖注入用于把一些可复用的逻辑抽离出来，减少代码重复。例如，返回列表的 API 中都会用到 page和 page_size 这几个参数，那么可以创建一个依赖来包含这两个参数。" />
  <meta name="robots" content="index, follow" />
  <link rel="canonical" href="/文集/feed/逸飞的技术日志.html" />

  <link rel="stylesheet" type="text/css" id="baseStyle" href="https://fastly.jsdelivr.net/gh/siyuan-note/oceanpress@1.0.6/apps/frontend/public/notebook/stage/build/export/base.css?2.10.5"/>
  <script>
  function isNightTime() {
    const currentHour = new Date().getHours();
    return currentHour >= 18 || currentHour < 6;
  }
  document.write('<link rel="stylesheet" type="text/css" id="themeDefaultStyle" href="https://fastly.jsdelivr.net/gh/siyuan-note/oceanpress@1.0.6/apps/frontend/public/notebook/appearance/themes/'+(isNightTime()?'midnight':'daylight')+'/theme.css?2.10.5"/>');
  </script>
  <link rel="stylesheet" type="text/css" href="https://fastly.jsdelivr.net/gh/siyuan-note/oceanpress@1.0.6/apps/frontend/public/notebook/appearance/oceanpress.css"/>
  <title>逸飞的技术日志</title>
  <script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Article",
  "headline": "逸飞的技术日志",
  "description": "逸飞的技术日志 ​ FastAPI 中的依赖注入和插件系统 published:Sat, 23 Apr 2022 01:06:29 GMT 依赖注入用于把一些可复用的逻辑抽离出来，减少代码重复。例如，返回列表的 API 中都会用到 page和 page_size 这几个参数，那么可以创建一个依赖来包含这两个参数。",
  "keywords": "gmt, published, sat, aug, 一个, 测试, fastapi, 文件",
  "datePublished": "2023-12-16T21:25:02Z",
  "dateModified": "2025-07-24T20:08:22Z",
  "author": {
    "@type": "Person",
    "name": "崮生",
    "url": ""
  },
  "publisher": {
    "@type": "Organization",
    "name": "OceanPress",
    "logo": {
      "@type": "ImageObject",
      "url": "/assets/logo.png"
    }
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "/文集/feed/逸飞的技术日志.html"
  },
  "wordCount": 12321,
  "articleSection": "技术文档",
  "inLanguage": "zh-CN"
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position": 1,
      "name": "文集",
      "item": "/文集.html"
    },
    {
      "@type": "ListItem",
      "position": 2,
      "name": "feed",
      "item": "/文集/feed.html"
    },
    {
      "@type": "ListItem",
      "position": 3,
      "name": "逸飞的技术日志",
      "item": "/文集/feed/逸飞的技术日志.html"
    }
  ]
}
</script>
</head>
<body>
  <div class="header-container">
  <a href="/" class="home-button">首页</a>
  <div id="search"></div>
</div>

  <div class="protyle-wysiwyg protyle-wysiwyg--attr" id="preview">
  <div id="oceanpress-left-sidebar">
    
    <iframe src="./../../__oceanpress/docTree.html"></iframe>
  </div>
  <div style="min-height: 150px;" id="20231216212502-ym67vlt" data-node-id="20231216212502-ym67vlt" data-type="NodeDocument" updated="20250724200822" bookmark="feed" custom-sy-readonly="false" type="doc">

<h1 id="20231216212502-ym67vlt" data-node-id="20231216212502-ym67vlt" data-type="NodeDocument" updated="20250724200822" bookmark="feed" custom-sy-readonly="false" type="doc" data-type="NodeHeading" class="h1">逸飞的技术日志</h1>
<div id="20231216223019-bdz8em2" data-node-id="20231216223019-bdz8em2" data-type="NodeParagraph" updated="20240113182721" class="p"><div spellcheck="false">​</div></div><div id="20231216212505-0qdndgz" data-node-id="20231216212505-0qdndgz" data-type="NodeList" updated="20250724200822" data-subtype="t" class="list"><div id="20250724200822-y2vdz51" data-node-id="20250724200822-y2vdz51" data-type="NodeList" updated="20250724200822" data-subtype="t" class="list"><div id="20250724200822-ooag6k8" data-node-id="20250724200822-ooag6k8" data-type="NodeListItem" updated="20250724200822" data-subtype="t" class="li" data-marker="*">
        <div class="protyle-action">
          <svg><use xlink:href="#iconUncheck"></use></svg>
        </div>
        <h6 id="20250724200822-9iyihc4" data-node-id="20250724200822-9iyihc4" data-type="NodeHeading" updated="20250724200822" data-subtype="h6" class="h6"><a href="https://yifei.me/note/2428">FastAPI 中的依赖注入和插件系统</a></h6><div id="20250724200822-hpworz6" data-node-id="20250724200822-hpworz6" data-type="NodeList" updated="20250724200822" data-subtype="u" class="list"><div id="20250724200822-2so4i5p" data-node-id="20250724200822-2so4i5p" data-type="NodeListItem" updated="20250724200822" data-subtype="u" class="li" data-marker="*">
        <div class="protyle-action">
          <svg><use xlink:href="#iconDot"></use></svg>
        </div>
        <div id="20250724200822-eqmh9ec" data-node-id="20250724200822-eqmh9ec" data-type="NodeParagraph" updated="20250724200822" class="p"><div spellcheck="false">published:Sat, 23 Apr 2022 01:06:29 GMT</div></div>
      </div></div><div id="20250724200822-6tqavqs" data-node-id="20250724200822-6tqavqs" data-type="NodeBlockquote" updated="20250724200822" class="bq"><div id="20250724200822-efbrurx" data-node-id="20250724200822-efbrurx" data-type="NodeParagraph" updated="20250724200822" class="p"><div spellcheck="false">依赖注入用于把一些可复用的逻辑抽离出来，减少代码重复。例如，返回列表的 API 中都会用到 page和 page_size 这几个参数，那么可以创建一个依赖来包含这两个参数。还可以使用依赖来做插件，如在依赖中做一些 Token 的验证等等。所以，在 FastAPI 中，不需要插件系统，只要把要复用的...</div></div></div>
      </div></div><div id="20250724200822-7nse9h1" data-node-id="20250724200822-7nse9h1" data-type="NodeList" updated="20250724200822" data-subtype="t" class="list"><div id="20250724200822-sdjxete" data-node-id="20250724200822-sdjxete" data-type="NodeListItem" updated="20250724200822" data-subtype="t" class="li" data-marker="*">
        <div class="protyle-action">
          <svg><use xlink:href="#iconUncheck"></use></svg>
        </div>
        <h6 id="20250724200822-ii7y6wd" data-node-id="20250724200822-ii7y6wd" data-type="NodeHeading" updated="20250724200822" data-subtype="h6" class="h6"><a href="https://yifei.me/note/2947">使用 multipass+autok3s 快速搭建本地 k3s 集群</a></h6><div id="20250724200822-2u4erpe" data-node-id="20250724200822-2u4erpe" data-type="NodeList" updated="20250724200822" data-subtype="u" class="list"><div id="20250724200822-y31rxeh" data-node-id="20250724200822-y31rxeh" data-type="NodeListItem" updated="20250724200822" data-subtype="u" class="li" data-marker="*">
        <div class="protyle-action">
          <svg><use xlink:href="#iconDot"></use></svg>
        </div>
        <div id="20250724200822-6jdcmo8" data-node-id="20250724200822-6jdcmo8" data-type="NodeParagraph" updated="20250724200822" class="p"><div spellcheck="false">published:Thu, 28 Apr 2022 03:56:40 GMT</div></div>
      </div></div><div id="20250724200822-u4vmh5q" data-node-id="20250724200822-u4vmh5q" data-type="NodeBlockquote" updated="20250724200822" class="bq"><div id="20250724200822-ygj21uz" data-node-id="20250724200822-ygj21uz" data-type="NodeParagraph" updated="20250724200822" class="p"><div spellcheck="false">最近要迁移一个老服务到 kubernetes 上，自然需要在本地先测试好，然后再部署到生产集群中。然而 Docker Desktop 性能实在太差，而且已经不再免费了，所以研究了下其他工具，遂有本文。用到的工具multipass 是 Ubuntu 背后的厂商 Canonical 推出的一款虚拟机工具...</div></div></div>
      </div></div><div id="20250724200822-ekbndhu" data-node-id="20250724200822-ekbndhu" data-type="NodeList" updated="20250724200822" data-subtype="t" class="list"><div id="20250724200822-0y42j5r" data-node-id="20250724200822-0y42j5r" data-type="NodeListItem" updated="20250724200822" data-subtype="t" class="li" data-marker="*">
        <div class="protyle-action">
          <svg><use xlink:href="#iconUncheck"></use></svg>
        </div>
        <h6 id="20250724200822-8tu1j6y" data-node-id="20250724200822-8tu1j6y" data-type="NodeHeading" updated="20250724200822" data-subtype="h6" class="h6"><a href="https://yifei.me/note/2918">Kubernetes is boring enough for me</a></h6><div id="20250724200822-57lm3qo" data-node-id="20250724200822-57lm3qo" data-type="NodeList" updated="20250724200822" data-subtype="u" class="list"><div id="20250724200822-bswmw5l" data-node-id="20250724200822-bswmw5l" data-type="NodeListItem" updated="20250724200822" data-subtype="u" class="li" data-marker="*">
        <div class="protyle-action">
          <svg><use xlink:href="#iconDot"></use></svg>
        </div>
        <div id="20250724200822-e5cp3j2" data-node-id="20250724200822-e5cp3j2" data-type="NodeParagraph" updated="20250724200822" class="p"><div spellcheck="false">published:Mon, 23 May 2022 01:44:05 GMT</div></div>
      </div></div><div id="20250724200822-hk9rzld" data-node-id="20250724200822-hk9rzld" data-type="NodeBlockquote" updated="20250724200822" class="bq"><div id="20250724200822-y26isu2" data-node-id="20250724200822-y26isu2" data-type="NodeParagraph" updated="20250724200822" class="p"><div spellcheck="false">Kubernetes is the new normal. Everyone knows and understands kubernetes, it's the defaultoption for now. Rolling out your own infra would be more expe...</div></div></div>
      </div></div><div id="20250724200822-34nxblf" data-node-id="20250724200822-34nxblf" data-type="NodeList" updated="20250724200822" data-subtype="t" class="list"><div id="20250724200822-sjdap39" data-node-id="20250724200822-sjdap39" data-type="NodeListItem" updated="20250724200822" data-subtype="t" class="li" data-marker="*">
        <div class="protyle-action">
          <svg><use xlink:href="#iconUncheck"></use></svg>
        </div>
        <h6 id="20250724200822-4y9a3j2" data-node-id="20250724200822-4y9a3j2" data-type="NodeHeading" updated="20250724200822" data-subtype="h6" class="h6"><a href="https://yifei.me/note/2258">迁移并升级 Elasticsearch 5.5 到 6.8</a></h6><div id="20250724200822-2i0xh7a" data-node-id="20250724200822-2i0xh7a" data-type="NodeList" updated="20250724200822" data-subtype="u" class="list"><div id="20250724200822-l2cvyns" data-node-id="20250724200822-l2cvyns" data-type="NodeListItem" updated="20250724200822" data-subtype="u" class="li" data-marker="*">
        <div class="protyle-action">
          <svg><use xlink:href="#iconDot"></use></svg>
        </div>
        <div id="20250724200822-cz4wl96" data-node-id="20250724200822-cz4wl96" data-type="NodeParagraph" updated="20250724200822" class="p"><div spellcheck="false">published:Mon, 23 May 2022 01:44:05 GMT</div></div>
      </div></div><div id="20250724200822-n5uwca0" data-node-id="20250724200822-n5uwca0" data-type="NodeBlockquote" updated="20250724200822" class="bq"><div id="20250724200822-vnxw6r1" data-node-id="20250724200822-vnxw6r1" data-type="NodeParagraph" updated="20250724200822" class="p"><div spellcheck="false">最近需要把一个 ES 5.5 的集群迁移到 K8S 上，因为目标环境中只有 ES 7 集群，所以在迁移过程中还需要升级下索引的版本。不过最终只升级到了 6.8。开始看到了一个 reindex 的 API，想着直接从老集群 reindex 过去就好了，结果发现不行。直接reindex 会丢掉类型信息。...</div></div></div>
      </div></div><div id="20250724200822-mnza7c9" data-node-id="20250724200822-mnza7c9" data-type="NodeList" updated="20250724200822" data-subtype="t" class="list"><div id="20250724200822-ub31op4" data-node-id="20250724200822-ub31op4" data-type="NodeListItem" updated="20250724200822" data-subtype="t" class="li" data-marker="*">
        <div class="protyle-action">
          <svg><use xlink:href="#iconUncheck"></use></svg>
        </div>
        <h6 id="20250724200822-4y4lt39" data-node-id="20250724200822-4y4lt39" data-type="NodeHeading" updated="20250724200822" data-subtype="h6" class="h6"><a href="https://yifei.me/note/2951">和风车决斗的堂吉诃德</a></h6><div id="20250724200822-n4e8zeo" data-node-id="20250724200822-n4e8zeo" data-type="NodeList" updated="20250724200822" data-subtype="u" class="list"><div id="20250724200822-dnrub9m" data-node-id="20250724200822-dnrub9m" data-type="NodeListItem" updated="20250724200822" data-subtype="u" class="li" data-marker="*">
        <div class="protyle-action">
          <svg><use xlink:href="#iconDot"></use></svg>
        </div>
        <div id="20250724200822-0vb2lmp" data-node-id="20250724200822-0vb2lmp" data-type="NodeParagraph" updated="20250724200822" class="p"><div spellcheck="false">published:Mon, 23 May 2022 15:41:15 GMT</div></div>
      </div></div><div id="20250724200822-qsv3sq0" data-node-id="20250724200822-qsv3sq0" data-type="NodeBlockquote" updated="20250724200822" class="bq"><div id="20250724200822-i3xglcl" data-node-id="20250724200822-i3xglcl" data-type="NodeParagraph" updated="20250724200822" class="p"><div spellcheck="false">今天不谈论代码了，写代码也救不了中国人。我们知道一个病毒的传播能力可以用 R0 来表示，即每个患者传染的新患者的数量。我们又知道，社会上除了占大多数的遵纪守法好公民，还有目无法纪的奸商、涣散烂漫的小市民和一小撮玩忽职守的领导干部。因此，当局制定的政策的传达效力是有限的，我们只能指望其中的好公民去 1...</div></div></div>
      </div></div><div id="20250724200822-1ge4qt7" data-node-id="20250724200822-1ge4qt7" data-type="NodeList" updated="20250724200822" data-subtype="t" class="list"><div id="20250724200822-bnd26i7" data-node-id="20250724200822-bnd26i7" data-type="NodeListItem" updated="20250724200822" data-subtype="t" class="li" data-marker="*">
        <div class="protyle-action">
          <svg><use xlink:href="#iconUncheck"></use></svg>
        </div>
        <h6 id="20250724200822-doxxsad" data-node-id="20250724200822-doxxsad" data-type="NodeHeading" updated="20250724200822" data-subtype="h6" class="h6"><a href="https://yifei.me/note/1105">kubectl 备忘录</a></h6><div id="20250724200822-xtzydpq" data-node-id="20250724200822-xtzydpq" data-type="NodeList" updated="20250724200822" data-subtype="u" class="list"><div id="20250724200822-u0nhb1q" data-node-id="20250724200822-u0nhb1q" data-type="NodeListItem" updated="20250724200822" data-subtype="u" class="li" data-marker="*">
        <div class="protyle-action">
          <svg><use xlink:href="#iconDot"></use></svg>
        </div>
        <div id="20250724200822-5hnq9g7" data-node-id="20250724200822-5hnq9g7" data-type="NodeParagraph" updated="20250724200822" class="p"><div spellcheck="false">published:Sat, 04 Jun 2022 08:20:08 GMT</div></div>
      </div></div><div id="20250724200822-ivotqmv" data-node-id="20250724200822-ivotqmv" data-type="NodeBlockquote" updated="20250724200822" class="bq"><div id="20250724200822-3g1vzqa" data-node-id="20250724200822-3g1vzqa" data-type="NodeParagraph" updated="20250724200822" class="p"><div spellcheck="false">查看集群资源获取各种资源列表：# -o 指定范围格式，<span data-type="code">-o wide</span>​ 用来显示更详细信息kubectl get node/pod/deploy/node/svc -o wide/yaml/name描述详细信息：# -n 指定命名空间kubectl describe node/pod/deploy...</div></div></div>
      </div></div><div id="20250724200822-3x6x37d" data-node-id="20250724200822-3x6x37d" data-type="NodeList" updated="20250724200822" data-subtype="t" class="list"><div id="20250724200822-4d1tze6" data-node-id="20250724200822-4d1tze6" data-type="NodeListItem" updated="20250724200822" data-subtype="t" class="li" data-marker="*">
        <div class="protyle-action">
          <svg><use xlink:href="#iconUncheck"></use></svg>
        </div>
        <h6 id="20250724200822-i53ojw2" data-node-id="20250724200822-i53ojw2" data-type="NodeHeading" updated="20250724200822" data-subtype="h6" class="h6"><a href="https://yifei.me/note/2899">单元测试的笔记和心得体会</a></h6><div id="20250724200822-aj4dlkm" data-node-id="20250724200822-aj4dlkm" data-type="NodeList" updated="20250724200822" data-subtype="u" class="list"><div id="20250724200822-nvahx2h" data-node-id="20250724200822-nvahx2h" data-type="NodeListItem" updated="20250724200822" data-subtype="u" class="li" data-marker="*">
        <div class="protyle-action">
          <svg><use xlink:href="#iconDot"></use></svg>
        </div>
        <div id="20250724200822-gyly2eg" data-node-id="20250724200822-gyly2eg" data-type="NodeParagraph" updated="20250724200822" class="p"><div spellcheck="false">published:Fri, 07 Oct 2022 16:01:40 GMT</div></div>
      </div></div><div id="20250724200822-ch8wnq4" data-node-id="20250724200822-ch8wnq4" data-type="NodeBlockquote" updated="20250724200822" class="bq"><div id="20250724200822-7xher54" data-node-id="20250724200822-7xher54" data-type="NodeParagraph" updated="20250724200822" class="p"><div spellcheck="false">编写优质测试的前提明确最小单元，以及单元的功能点都有哪些。如果在写代码之前都没有明确功能有哪些，或者编写 功能已经跑偏了，那么测试究竟测些什么呢？确定方案能够解决问题，然后再写测试，否则是徒劳的。编写测试的基本原则每一个测试单元必须完全独立。每一个必须能够独立运行，以及在其他的测试组中组合运行，不管...</div></div></div>
      </div></div><div id="20250724200822-qrv0ttn" data-node-id="20250724200822-qrv0ttn" data-type="NodeList" updated="20250724200822" data-subtype="t" class="list"><div id="20250724200822-hnnxxqa" data-node-id="20250724200822-hnnxxqa" data-type="NodeListItem" updated="20250724200822" data-subtype="t" class="li" data-marker="*">
        <div class="protyle-action">
          <svg><use xlink:href="#iconUncheck"></use></svg>
        </div>
        <h6 id="20250724200822-oc927a4" data-node-id="20250724200822-oc927a4" data-type="NodeHeading" updated="20250724200822" data-subtype="h6" class="h6"><a href="https://yifei.me/note/3053">useReducer + useContext = (Better) Redux</a></h6><div id="20250724200822-9k3cgp8" data-node-id="20250724200822-9k3cgp8" data-type="NodeList" updated="20250724200822" data-subtype="u" class="list"><div id="20250724200822-7o4gz0l" data-node-id="20250724200822-7o4gz0l" data-type="NodeListItem" updated="20250724200822" data-subtype="u" class="li" data-marker="*">
        <div class="protyle-action">
          <svg><use xlink:href="#iconDot"></use></svg>
        </div>
        <div id="20250724200822-2gqnqm1" data-node-id="20250724200822-2gqnqm1" data-type="NodeParagraph" updated="20250724200822" class="p"><div spellcheck="false">published:Mon, 31 Oct 2022 13:45:05 GMT</div></div>
      </div></div><div id="20250724200822-6k0ip8h" data-node-id="20250724200822-6k0ip8h" data-type="NodeBlockquote" updated="20250724200822" class="bq"><div id="20250724200822-q82iu1j" data-node-id="20250724200822-q82iu1j" data-type="NodeParagraph" updated="20250724200822" class="p"><div spellcheck="false">useState 是 React 开发中最常用的一个钩子。但当程序稍微复杂一些的时候，只依赖 useState 就显得有些力不从心了，这时候需要一个全局状态管理工具。在我刚接触 React 时，看到的教程一般都推荐 redux，在经历过无数次的尝试之后，我发现以我的智商理解不了 redux 神奇的设...</div></div></div>
      </div></div><div id="20250724200822-49axo0x" data-node-id="20250724200822-49axo0x" data-type="NodeList" updated="20250724200822" data-subtype="t" class="list"><div id="20250724200822-o44mudi" data-node-id="20250724200822-o44mudi" data-type="NodeListItem" updated="20250724200822" data-subtype="t" class="li" data-marker="*">
        <div class="protyle-action">
          <svg><use xlink:href="#iconUncheck"></use></svg>
        </div>
        <h6 id="20250724200822-8zu0m6g" data-node-id="20250724200822-8zu0m6g" data-type="NodeHeading" updated="20250724200822" data-subtype="h6" class="h6"><a href="https://yifei.me/note/2719">curl_cffi: 支持原生模拟浏览器 TLS/JA3 指纹的 Python 库</a></h6><div id="20250724200822-jd6loas" data-node-id="20250724200822-jd6loas" data-type="NodeList" updated="20250724200822" data-subtype="u" class="list"><div id="20250724200822-e2oewgs" data-node-id="20250724200822-e2oewgs" data-type="NodeListItem" updated="20250724200822" data-subtype="u" class="li" data-marker="*">
        <div class="protyle-action">
          <svg><use xlink:href="#iconDot"></use></svg>
        </div>
        <div id="20250724200822-dz7nke1" data-node-id="20250724200822-dz7nke1" data-type="NodeParagraph" updated="20250724200822" class="p"><div spellcheck="false">published:Sat, 28 Jan 2023 10:08:05 GMT</div></div>
      </div></div><div id="20250724200822-j27e1wi" data-node-id="20250724200822-j27e1wi" data-type="NodeBlockquote" updated="20250724200822" class="bq"><div id="20250724200822-wb2s7yh" data-node-id="20250724200822-wb2s7yh" data-type="NodeParagraph" updated="20250724200822" class="p"><div spellcheck="false">越来越多的网站开始使用 TLS 指纹反爬虫，而 Python 中竟然没有任何方法解决这个问题。前一阵看到由国外大神写了一个 curl-impersonate 命令行工具，可以完美模拟主流浏览器的指纹，遂用cffi 封装成了 Python 库 curl_cffi，这样就可以继续愉快地写爬虫啦！TLS ...</div></div></div>
      </div></div><div id="20250724200822-wzzux9n" data-node-id="20250724200822-wzzux9n" data-type="NodeList" updated="20250724200822" data-subtype="t" class="list"><div id="20250724200822-c1w8z2b" data-node-id="20250724200822-c1w8z2b" data-type="NodeListItem" updated="20250724200822" data-subtype="t" class="li" data-marker="*">
        <div class="protyle-action">
          <svg><use xlink:href="#iconUncheck"></use></svg>
        </div>
        <h6 id="20250724200822-zgnejmy" data-node-id="20250724200822-zgnejmy" data-type="NodeHeading" updated="20250724200822" data-subtype="h6" class="h6"><a href="https://yifei.me/note/377">为什么不要加入创业公司</a></h6><div id="20250724200822-syh7ty2" data-node-id="20250724200822-syh7ty2" data-type="NodeList" updated="20250724200822" data-subtype="u" class="list"><div id="20250724200822-atlenzu" data-node-id="20250724200822-atlenzu" data-type="NodeListItem" updated="20250724200822" data-subtype="u" class="li" data-marker="*">
        <div class="protyle-action">
          <svg><use xlink:href="#iconDot"></use></svg>
        </div>
        <div id="20250724200822-4hbv1ad" data-node-id="20250724200822-4hbv1ad" data-type="NodeParagraph" updated="20250724200822" class="p"><div spellcheck="false">published:Sat, 19 Aug 2023 10:13:41 GMT</div></div>
      </div></div><div id="20250724200822-tfeckvn" data-node-id="20250724200822-tfeckvn" data-type="NodeBlockquote" updated="20250724200822" class="bq"><div id="20250724200822-qd1bdxw" data-node-id="20250724200822-qd1bdxw" data-type="NodeParagraph" updated="20250724200822" class="p"><div spellcheck="false">据统计，92% 的创业公司，活不过三年，一定不要盲选创业公司，为了创业而创业。你以为在中关村摆个柜台，十年之后就一定可以成为刘强东么？还有一个更搞笑的说法，说什么创业公司最大的财富都是在最后一个阶段产生的，所以任何时候上车都不晚，实际上这纯属扯淡。你在第一年加入，以后可能是一万倍的收益，而在最后一年...</div></div></div>
      </div></div><div id="20250724200822-qsah8vg" data-node-id="20250724200822-qsah8vg" data-type="NodeList" updated="20250724200822" data-subtype="t" class="list"><div id="20250724200822-1d8keba" data-node-id="20250724200822-1d8keba" data-type="NodeListItem" updated="20250724200822" data-subtype="t" class="li" data-marker="*">
        <div class="protyle-action">
          <svg><use xlink:href="#iconUncheck"></use></svg>
        </div>
        <h6 id="20250724200822-czil3rv" data-node-id="20250724200822-czil3rv" data-type="NodeHeading" updated="20250724200822" data-subtype="h6" class="h6"><a href="https://yifei.me/note/3016">FastAPI 使用路由模块化</a></h6><div id="20250724200822-xj92zu8" data-node-id="20250724200822-xj92zu8" data-type="NodeList" updated="20250724200822" data-subtype="u" class="list"><div id="20250724200822-h0k0k52" data-node-id="20250724200822-h0k0k52" data-type="NodeListItem" updated="20250724200822" data-subtype="u" class="li" data-marker="*">
        <div class="protyle-action">
          <svg><use xlink:href="#iconDot"></use></svg>
        </div>
        <div id="20250724200822-4kamsqe" data-node-id="20250724200822-4kamsqe" data-type="NodeParagraph" updated="20250724200822" class="p"><div spellcheck="false">published:Sat, 19 Aug 2023 12:12:30 GMT</div></div>
      </div></div><div id="20250724200822-i4cry77" data-node-id="20250724200822-i4cry77" data-type="NodeBlockquote" updated="20250724200822" class="bq"><div id="20250724200822-tc7ts3t" data-node-id="20250724200822-tc7ts3t" data-type="NodeParagraph" updated="20250724200822" class="p"><div spellcheck="false">FastAPI 中的 router 相当于 Flask 中的 Blueprint, 用来切分应用到不同的模块。# views/users.pyfrom fastapi import APIRouterrouter = APIRouter()@router.get("/me")def myinfo()...</div></div></div>
      </div></div><div id="20250724200822-xne1ftu" data-node-id="20250724200822-xne1ftu" data-type="NodeList" updated="20250724200822" data-subtype="t" class="list"><div id="20250724200822-snh6h9e" data-node-id="20250724200822-snh6h9e" data-type="NodeListItem" updated="20250724200822" data-subtype="t" class="li" data-marker="*">
        <div class="protyle-action">
          <svg><use xlink:href="#iconUncheck"></use></svg>
        </div>
        <h6 id="20250724200822-gf444gw" data-node-id="20250724200822-gf444gw" data-type="NodeHeading" updated="20250724200822" data-subtype="h6" class="h6"><a href="https://yifei.me/note/2892">GitHub Actions 的简单使用和调试</a></h6><div id="20250724200822-ayr66uk" data-node-id="20250724200822-ayr66uk" data-type="NodeList" updated="20250724200822" data-subtype="u" class="list"><div id="20250724200822-ife3900" data-node-id="20250724200822-ife3900" data-type="NodeListItem" updated="20250724200822" data-subtype="u" class="li" data-marker="*">
        <div class="protyle-action">
          <svg><use xlink:href="#iconDot"></use></svg>
        </div>
        <div id="20250724200822-xdompld" data-node-id="20250724200822-xdompld" data-type="NodeParagraph" updated="20250724200822" class="p"><div spellcheck="false">published:Sat, 19 Aug 2023 12:12:30 GMT</div></div>
      </div></div><div id="20250724200822-z1awgme" data-node-id="20250724200822-z1awgme" data-type="NodeBlockquote" updated="20250724200822" class="bq"><div id="20250724200822-ivgi8o5" data-node-id="20250724200822-ivgi8o5" data-type="NodeParagraph" updated="20250724200822" class="p"><div spellcheck="false">GitHub Actions 使用 yaml 配置，必须放置在 .github/workflows 目录。# 名字name: hello-world-example# 环境变量env:  FOO: bar# 触发条件on:  # 最常用的是 push 条件，如果留空，表示每次 push 都执行。  ...</div></div></div>
      </div></div><div id="20250724200822-go0638f" data-node-id="20250724200822-go0638f" data-type="NodeList" updated="20250724200822" data-subtype="t" class="list"><div id="20250724200822-5u72zsw" data-node-id="20250724200822-5u72zsw" data-type="NodeListItem" updated="20250724200822" data-subtype="t" class="li" data-marker="*">
        <div class="protyle-action">
          <svg><use xlink:href="#iconUncheck"></use></svg>
        </div>
        <h6 id="20250724200822-0zgeiuh" data-node-id="20250724200822-0zgeiuh" data-type="NodeHeading" updated="20250724200822" data-subtype="h6" class="h6"><a href="https://yifei.me/note/2816"><span data-type="code">just</span></a>​<a href="https://yifei.me/note/2816">，一个现代版的 </a><a href="https://yifei.me/note/2816"><span data-type="code">make</span></a>​</h6><div id="20250724200822-y3trzcw" data-node-id="20250724200822-y3trzcw" data-type="NodeList" updated="20250724200822" data-subtype="u" class="list"><div id="20250724200822-cnbkcx8" data-node-id="20250724200822-cnbkcx8" data-type="NodeListItem" updated="20250724200822" data-subtype="u" class="li" data-marker="*">
        <div class="protyle-action">
          <svg><use xlink:href="#iconDot"></use></svg>
        </div>
        <div id="20250724200822-lajsmno" data-node-id="20250724200822-lajsmno" data-type="NodeParagraph" updated="20250724200822" class="p"><div spellcheck="false">published:Sat, 19 Aug 2023 12:12:30 GMT</div></div>
      </div></div><div id="20250724200822-0qbj2fh" data-node-id="20250724200822-0qbj2fh" data-type="NodeBlockquote" updated="20250724200822" class="bq"><div id="20250724200822-v4s6mfn" data-node-id="20250724200822-v4s6mfn" data-type="NodeParagraph" updated="20250724200822" class="p"><div spellcheck="false">我们知道 make 包含了两个主要功能：构建 C 工程运行具有依赖关系的任务而由于 make 的时代太过久远，导致现在用起来会有几个坑爹之处：声明变量语法奇怪每次都加 .PHONY 很麻烦配置 SHELL 也很反直觉多行命令不在同一个 shell 中运行必须用 \t 缩进另一方面，我也只需要运行任务...</div></div></div>
      </div></div><div id="20250724200822-3f96dl4" data-node-id="20250724200822-3f96dl4" data-type="NodeList" updated="20250724200822" data-subtype="t" class="list"><div id="20250724200822-1qa9bxw" data-node-id="20250724200822-1qa9bxw" data-type="NodeListItem" updated="20250724200822" data-subtype="t" class="li" data-marker="*">
        <div class="protyle-action">
          <svg><use xlink:href="#iconUncheck"></use></svg>
        </div>
        <h6 id="20250724200822-x98fjmc" data-node-id="20250724200822-x98fjmc" data-type="NodeHeading" updated="20250724200822" data-subtype="h6" class="h6"><a href="https://yifei.me/note/2473">使用 SQLite 作为文档数据库</a></h6><div id="20250724200822-7wdxczy" data-node-id="20250724200822-7wdxczy" data-type="NodeList" updated="20250724200822" data-subtype="u" class="list"><div id="20250724200822-yfsvpg6" data-node-id="20250724200822-yfsvpg6" data-type="NodeListItem" updated="20250724200822" data-subtype="u" class="li" data-marker="*">
        <div class="protyle-action">
          <svg><use xlink:href="#iconDot"></use></svg>
        </div>
        <div id="20250724200822-5tkzbdh" data-node-id="20250724200822-5tkzbdh" data-type="NodeParagraph" updated="20250724200822" class="p"><div spellcheck="false">published:Sat, 19 Aug 2023 12:12:30 GMT</div></div>
      </div></div><div id="20250724200822-kv5j369" data-node-id="20250724200822-kv5j369" data-type="NodeBlockquote" updated="20250724200822" class="bq"><div id="20250724200822-chcj3g7" data-node-id="20250724200822-chcj3g7" data-type="NodeParagraph" updated="20250724200822" class="p"><div spellcheck="false">本文需要 SQLite = 3.31.0(2020-01-22)在 SQLite 的新版本中已经支持了 json 函数 (json_extract)，我们完全可以把它当做一个文档数据库使用。而且更妙的是，还可以直接添加"合成列"(generated column), 也就是使用 json 中的字段作...</div></div></div>
      </div></div><div id="20250724200822-hhbahh1" data-node-id="20250724200822-hhbahh1" data-type="NodeList" updated="20250724200822" data-subtype="t" class="list"><div id="20250724200822-u4cqwa5" data-node-id="20250724200822-u4cqwa5" data-type="NodeListItem" updated="20250724200822" data-subtype="t" class="li" data-marker="*">
        <div class="protyle-action">
          <svg><use xlink:href="#iconUncheck"></use></svg>
        </div>
        <h6 id="20250724200822-hm2r3oa" data-node-id="20250724200822-hm2r3oa" data-type="NodeHeading" updated="20250724200822" data-subtype="h6" class="h6"><a href="https://yifei.me/note/2457">在子线程中 fork 会怎样？</a></h6><div id="20250724200822-89ippoh" data-node-id="20250724200822-89ippoh" data-type="NodeList" updated="20250724200822" data-subtype="u" class="list"><div id="20250724200822-sjo0ysr" data-node-id="20250724200822-sjo0ysr" data-type="NodeListItem" updated="20250724200822" data-subtype="u" class="li" data-marker="*">
        <div class="protyle-action">
          <svg><use xlink:href="#iconDot"></use></svg>
        </div>
        <div id="20250724200822-4lbahm6" data-node-id="20250724200822-4lbahm6" data-type="NodeParagraph" updated="20250724200822" class="p"><div spellcheck="false">published:Sat, 19 Aug 2023 12:12:30 GMT</div></div>
      </div></div><div id="20250724200822-93vmiyr" data-node-id="20250724200822-93vmiyr" data-type="NodeBlockquote" updated="20250724200822" class="bq"><div id="20250724200822-v9k4rtd" data-node-id="20250724200822-v9k4rtd" data-type="NodeParagraph" updated="20250724200822" class="p"><div spellcheck="false">按照 posix 的规范来说，fork 之后的进程中，应该只有调用 fork 的那个线程。但是实际上，所有线程都在，只是除了调用 fork 的线程以外，其他线程都被冻结了，并不会执行。一般来说，在 fork之后继续执行 exec* 的话，是不会有什么大问题的。fork 复制的是整个进程的空间，锁也会...</div></div></div>
      </div></div><div id="20250724200821-wgulkya" data-node-id="20250724200821-wgulkya" data-type="NodeList" updated="20250724200821" data-subtype="t" class="list"><div id="20250724200821-4nmb40x" data-node-id="20250724200821-4nmb40x" data-type="NodeListItem" updated="20250724200821" data-subtype="t" class="li" data-marker="*">
        <div class="protyle-action">
          <svg><use xlink:href="#iconUncheck"></use></svg>
        </div>
        <h6 id="20250724200821-772fsqi" data-node-id="20250724200821-772fsqi" data-type="NodeHeading" updated="20250724200821" data-subtype="h6" class="h6"><a href="https://yifei.me/note/2405">在 Python 中使用 SQLite</a></h6><div id="20250724200821-1ve89rz" data-node-id="20250724200821-1ve89rz" data-type="NodeList" updated="20250724200821" data-subtype="u" class="list"><div id="20250724200821-599m5xv" data-node-id="20250724200821-599m5xv" data-type="NodeListItem" updated="20250724200821" data-subtype="u" class="li" data-marker="*">
        <div class="protyle-action">
          <svg><use xlink:href="#iconDot"></use></svg>
        </div>
        <div id="20250724200821-1ksax51" data-node-id="20250724200821-1ksax51" data-type="NodeParagraph" updated="20250724200821" class="p"><div spellcheck="false">published:Sat, 19 Aug 2023 12:12:30 GMT</div></div>
      </div></div><div id="20250724200821-ycqli10" data-node-id="20250724200821-ycqli10" data-type="NodeBlockquote" updated="20250724200821" class="bq"><div id="20250724200821-u26efyn" data-node-id="20250724200821-u26efyn" data-type="NodeParagraph" updated="20250724200821" class="p"><div spellcheck="false">首先连接到数据库，获得 connection 对象，然后再获得 cursor，使用 cursor 来执行 sql 语句并获取结果。连接import sqlite3db = sqlite3.connect("database.db")  # connectionsdb.execute("CREATE ...</div></div></div>
      </div></div><div id="20250724200821-hudaqdx" data-node-id="20250724200821-hudaqdx" data-type="NodeList" updated="20250724200821" data-subtype="t" class="list"><div id="20250724200821-pdjvm5l" data-node-id="20250724200821-pdjvm5l" data-type="NodeListItem" updated="20250724200821" data-subtype="t" class="li" data-marker="*">
        <div class="protyle-action">
          <svg><use xlink:href="#iconUncheck"></use></svg>
        </div>
        <h6 id="20250724200821-qzfkol8" data-node-id="20250724200821-qzfkol8" data-type="NodeHeading" updated="20250724200821" data-subtype="h6" class="h6"><a href="https://yifei.me/note/1098">Podman 对比 Docker 使用笔记</a></h6><div id="20250724200821-jmr1oiu" data-node-id="20250724200821-jmr1oiu" data-type="NodeList" updated="20250724200821" data-subtype="u" class="list"><div id="20250724200821-5yauth7" data-node-id="20250724200821-5yauth7" data-type="NodeListItem" updated="20250724200821" data-subtype="u" class="li" data-marker="*">
        <div class="protyle-action">
          <svg><use xlink:href="#iconDot"></use></svg>
        </div>
        <div id="20250724200821-0mkybdh" data-node-id="20250724200821-0mkybdh" data-type="NodeParagraph" updated="20250724200821" class="p"><div spellcheck="false">published:Sat, 19 Aug 2023 12:12:30 GMT</div></div>
      </div></div><div id="20250724200821-acsdqs8" data-node-id="20250724200821-acsdqs8" data-type="NodeBlockquote" updated="20250724200821" class="bq"><div id="20250724200821-cb0w599" data-node-id="20250724200821-cb0w599" data-type="NodeParagraph" updated="20250724200821" class="p"><div spellcheck="false">podman 基本上和 docker 命令兼容没有 daemon，默认不使用 root可以导出 k8s 部署配置可以一键停止删除所有容器，stop -a, rm -a, rmi -a 等增加了 -l、--latest 选项，直接操作上一个 container，而不需要找到 id 然后再操作。Podm...</div></div></div>
      </div></div><div id="20250724200821-fuxubcz" data-node-id="20250724200821-fuxubcz" data-type="NodeList" updated="20250724200821" data-subtype="t" class="list"><div id="20250724200821-xg3tdns" data-node-id="20250724200821-xg3tdns" data-type="NodeListItem" updated="20250724200821" data-subtype="t" class="li" data-marker="*">
        <div class="protyle-action">
          <svg><use xlink:href="#iconUncheck"></use></svg>
        </div>
        <h6 id="20250724200821-wpkp3lz" data-node-id="20250724200821-wpkp3lz" data-type="NodeHeading" updated="20250724200821" data-subtype="h6" class="h6"><a href="https://yifei.me/note/425">Linux 命令行压缩工具</a></h6><div id="20250724200821-soergu9" data-node-id="20250724200821-soergu9" data-type="NodeList" updated="20250724200821" data-subtype="u" class="list"><div id="20250724200821-iqoozho" data-node-id="20250724200821-iqoozho" data-type="NodeListItem" updated="20250724200821" data-subtype="u" class="li" data-marker="*">
        <div class="protyle-action">
          <svg><use xlink:href="#iconDot"></use></svg>
        </div>
        <div id="20250724200821-xfqrmnb" data-node-id="20250724200821-xfqrmnb" data-type="NodeParagraph" updated="20250724200821" class="p"><div spellcheck="false">published:Sat, 19 Aug 2023 12:12:30 GMT</div></div>
      </div></div><div id="20250724200821-9l4zorq" data-node-id="20250724200821-9l4zorq" data-type="NodeBlockquote" updated="20250724200821" class="bq"><div id="20250724200821-mdhcum3" data-node-id="20250724200821-mdhcum3" data-type="NodeParagraph" updated="20250724200821" class="p"><div spellcheck="false">压缩文件主要分四类：tar.gz 或者 tgz 文件zip 文件rar 文件，Linux 下几乎没有7z 文件tar.gz 文件压缩tar cvzf FILES...解压tar xvzf TARBALLzip 文件zip -r ZIPFILE DIRECTORY to zip a directory...</div></div></div>
      </div></div><div id="20250724200821-83soj8b" data-node-id="20250724200821-83soj8b" data-type="NodeList" updated="20250724200821" data-subtype="t" class="list"><div id="20250724200821-53s7l88" data-node-id="20250724200821-53s7l88" data-type="NodeListItem" updated="20250724200821" data-subtype="t" class="li" data-marker="*">
        <div class="protyle-action">
          <svg><use xlink:href="#iconUncheck"></use></svg>
        </div>
        <h6 id="20250724200821-p7bsp0k" data-node-id="20250724200821-p7bsp0k" data-type="NodeHeading" updated="20250724200821" data-subtype="h6" class="h6"><a href="https://yifei.me/note/347">代码大全阅读笔记（待续）</a></h6><div id="20250724200821-azgolsk" data-node-id="20250724200821-azgolsk" data-type="NodeList" updated="20250724200821" data-subtype="u" class="list"><div id="20250724200821-705vmu2" data-node-id="20250724200821-705vmu2" data-type="NodeListItem" updated="20250724200821" data-subtype="u" class="li" data-marker="*">
        <div class="protyle-action">
          <svg><use xlink:href="#iconDot"></use></svg>
        </div>
        <div id="20250724200821-wsi61fl" data-node-id="20250724200821-wsi61fl" data-type="NodeParagraph" updated="20250724200821" class="p"><div spellcheck="false">published:Sat, 19 Aug 2023 12:12:30 GMT</div></div>
      </div></div><div id="20250724200821-0dwsc12" data-node-id="20250724200821-0dwsc12" data-type="NodeBlockquote" updated="20250724200821" class="bq"><div id="20250724200821-8k3rne1" data-node-id="20250724200821-8k3rne1" data-type="NodeParagraph" updated="20250724200821" class="p"><div spellcheck="false">TODO: 总结作为技术员工，你的一部分工作就是培训周围的非技术人员，讲解开发过程。在软件开发过程中，如果需求被污染了，那么他就会污染架构，而架构又会污染构建。这样会导致程序员脾气暴躁、营养失调；开发出的程序具有放射性污染，而且周身都是缺陷。发现错误的时间要尽可能接近引入错误的时间。问题定义应该用客...</div></div></div>
      </div></div><div id="20250724200821-2g3wv1b" data-node-id="20250724200821-2g3wv1b" data-type="NodeList" updated="20250724200821" data-subtype="t" class="list"><div id="20250724200821-8sd67vi" data-node-id="20250724200821-8sd67vi" data-type="NodeListItem" updated="20250724200821" data-subtype="t" class="li" data-marker="*">
        <div class="protyle-action">
          <svg><use xlink:href="#iconUncheck"></use></svg>
        </div>
        <h6 id="20250724200821-aju5mxv" data-node-id="20250724200821-aju5mxv" data-type="NodeHeading" updated="20250724200821" data-subtype="h6" class="h6"><a href="https://yifei.me/note/3001">读书的乐趣</a></h6><div id="20250724200821-yqai6ig" data-node-id="20250724200821-yqai6ig" data-type="NodeList" updated="20250724200821" data-subtype="u" class="list"><div id="20250724200821-z1easc0" data-node-id="20250724200821-z1easc0" data-type="NodeListItem" updated="20250724200821" data-subtype="u" class="li" data-marker="*">
        <div class="protyle-action">
          <svg><use xlink:href="#iconDot"></use></svg>
        </div>
        <div id="20250724200821-pvfherl" data-node-id="20250724200821-pvfherl" data-type="NodeParagraph" updated="20250724200821" class="p"><div spellcheck="false">published:Sat, 19 Aug 2023 16:33:25 GMT</div></div>
      </div></div><div id="20250724200821-pblkora" data-node-id="20250724200821-pblkora" data-type="NodeBlockquote" updated="20250724200821" class="bq"><div id="20250724200821-fkhii83" data-node-id="20250724200821-fkhii83" data-type="NodeParagraph" updated="20250724200821" class="p"><div spellcheck="false">有一天，一个叫 Alice 的六岁小女孩打来电话问了一个问题。她问，我是个好孩子，我弟弟是个坏孩子。爸爸妈妈要求我们每晚 9 点上床睡觉，每一次我都很听话，按时上床。可弟弟却不听话，每次要一个苹果才肯上床，而他居然每次都能得逞。我也想要一个苹果，但父母从来不给我。为什么弟弟是个坏孩子，他总能得到苹果...</div></div></div>
      </div></div><div id="20231216212505-kvk9dv4" data-node-id="20231216212505-kvk9dv4" data-type="NodeListItem" updated="20231216212505" data-subtype="u" class="li" data-marker="*">
        <div class="protyle-action">
          <svg><use xlink:href="#iconDot"></use></svg>
        </div>
        <div id="20231216212505-2ctjp9g" data-node-id="20231216212505-2ctjp9g" data-type="NodeParagraph" updated="20231216212505" class="p"><div spellcheck="false">feed:https://yifei.me/feed</div></div>
      </div><div id="20231216212505-yvu5y2g" data-node-id="20231216212505-yvu5y2g" data-type="NodeListItem" updated="20231222104837" data-subtype="u" class="li" data-marker="*">
        <div class="protyle-action">
          <svg><use xlink:href="#iconDot"></use></svg>
        </div>
        <div id="20231216212505-xdld85i" data-node-id="20231216212505-xdld85i" data-type="NodeParagraph" updated="20231222104837" class="p"><div spellcheck="false">cron:8 20 * * 5</div></div>
      </div><div id="20231216223213-qzs1usm" data-node-id="20231216223213-qzs1usm" data-type="NodeListItem" updated="20240113182734" data-subtype="u" class="li" data-marker="*">
        <div class="protyle-action">
          <svg><use xlink:href="#iconDot"></use></svg>
        </div>
        <div id="20231216223213-ucgui9o" data-node-id="20231216223213-ucgui9o" data-type="NodeParagraph" updated="20240113182734" class="p"><div spellcheck="false">blog:<a href="https://yifei.me/">https://yifei.me/</a> ​<span data-type="NodeImage" class="img" parent-style="width: 50px;" style="width: 40px;" style="width: 50px;">
  <img
    src="./../../assets/favicon-20231216223018-ypjetc4.ico"
    data-src="./../../assets/favicon-20231216223018-ypjetc4.ico"
    title=""
    style="width: 40px;"
    loading="lazy"
  />
  <span class="protyle-action__title"></span></span>​</div></div>
      </div></div><div id="20231216213941-n9f00tt" data-node-id="20231216213941-n9f00tt" data-type="NodeList" updated="20231216223502" data-subtype="t" class="list"><div id="20231216213941-nn4nw89" data-node-id="20231216213941-nn4nw89" data-type="NodeListItem" updated="20231216223502" data-subtype="t" class="li protyle-task--done " data-marker="*">
        <div class="protyle-action">
          <svg><use xlink:href="#iconCheck"></use></svg>
        </div>
        <h6 id="20231216213941-fbnjsu4" data-node-id="20231216213941-fbnjsu4" data-type="NodeHeading" updated="20231216213941" data-subtype="h6" class="h6"><a href="https://yifei.me/note/2428">FastAPI 中的依赖注入和插件系统</a></h6><div id="20231216213941-nlk4vc3" data-node-id="20231216213941-nlk4vc3" data-type="NodeList" updated="20231216213941" data-subtype="u" class="list"><div id="20231216213941-mrn9b74" data-node-id="20231216213941-mrn9b74" data-type="NodeListItem" updated="20231216213941" data-subtype="u" class="li" data-marker="*">
        <div class="protyle-action">
          <svg><use xlink:href="#iconDot"></use></svg>
        </div>
        <div id="20231216213941-e0vsubp" data-node-id="20231216213941-e0vsubp" data-type="NodeParagraph" updated="20231216213941" class="p"><div spellcheck="false">published:Sat, 23 Apr 2022 01:06:29 GMT</div></div>
      </div></div><div id="20231216213941-kau7y63" data-node-id="20231216213941-kau7y63" data-type="NodeBlockquote" updated="20231216213941" class="bq"><div id="20231216213941-znrzszi" data-node-id="20231216213941-znrzszi" data-type="NodeParagraph" updated="20231216213941" class="p"><div spellcheck="false">依赖注入用于把一些可复用的逻辑抽离出来，减少代码重复。例如，返回列表的 API 中都会用到 page和 page_size 这几个参数，那么可以创建一个依赖来包含这两个参数。还可以使用依赖来做插件，如在依赖中做一些 Token 的验证等等。所以，在 FastAPI 中，不需要插件系统，只要把要复用的...</div></div></div>
      </div></div><div id="20231216213941-y1pdhtm" data-node-id="20231216213941-y1pdhtm" data-type="NodeList" updated="20231216223522" data-subtype="t" class="list"><div id="20231216213941-gdus1wd" data-node-id="20231216213941-gdus1wd" data-type="NodeListItem" updated="20231216223522" data-subtype="t" class="li protyle-task--done " data-marker="*">
        <div class="protyle-action">
          <svg><use xlink:href="#iconCheck"></use></svg>
        </div>
        <h6 id="20231216213941-rmwwwu2" data-node-id="20231216213941-rmwwwu2" data-type="NodeHeading" updated="20231216213941" data-subtype="h6" class="h6"><a href="https://yifei.me/note/2947">使用 multipass+autok3s 快速搭建本地 k3s 集群</a></h6><div id="20231216213941-gpjty0f" data-node-id="20231216213941-gpjty0f" data-type="NodeList" updated="20231216213941" data-subtype="u" class="list"><div id="20231216213941-d6fzajf" data-node-id="20231216213941-d6fzajf" data-type="NodeListItem" updated="20231216213941" data-subtype="u" class="li" data-marker="*">
        <div class="protyle-action">
          <svg><use xlink:href="#iconDot"></use></svg>
        </div>
        <div id="20231216213941-tur94yu" data-node-id="20231216213941-tur94yu" data-type="NodeParagraph" updated="20231216213941" class="p"><div spellcheck="false">published:Thu, 28 Apr 2022 03:56:40 GMT</div></div>
      </div></div><div id="20231216213941-fd79rv6" data-node-id="20231216213941-fd79rv6" data-type="NodeBlockquote" updated="20231216213941" class="bq"><div id="20231216213941-uxr33rz" data-node-id="20231216213941-uxr33rz" data-type="NodeParagraph" updated="20231216213941" class="p"><div spellcheck="false">最近要迁移一个老服务到 kubernetes 上，自然需要在本地先测试好，然后再部署到生产集群中。然而 Docker Desktop 性能实在太差，而且已经不再免费了，所以研究了下其他工具，遂有本文。用到的工具multipass 是 Ubuntu 背后的厂商 Canonical 推出的一款虚拟机工具...</div></div></div>
      </div></div><div id="20231216213941-0lmzq7m" data-node-id="20231216213941-0lmzq7m" data-type="NodeList" updated="20231216222522" data-subtype="t" class="list"><div id="20231216213941-r4z3sdh" data-node-id="20231216213941-r4z3sdh" data-type="NodeListItem" updated="20231216222522" data-subtype="t" class="li protyle-task--done " data-marker="*">
        <div class="protyle-action">
          <svg><use xlink:href="#iconCheck"></use></svg>
        </div>
        <h6 id="20231216213941-tsdwrr5" data-node-id="20231216213941-tsdwrr5" data-type="NodeHeading" updated="20231216213941" data-subtype="h6" class="h6"><a href="https://yifei.me/note/2918">Kubernetes is boring enough for me</a></h6><div id="20231216213941-sx7ljrt" data-node-id="20231216213941-sx7ljrt" data-type="NodeList" updated="20231216213941" data-subtype="u" class="list"><div id="20231216213941-s8hacq0" data-node-id="20231216213941-s8hacq0" data-type="NodeListItem" updated="20231216213941" data-subtype="u" class="li" data-marker="*">
        <div class="protyle-action">
          <svg><use xlink:href="#iconDot"></use></svg>
        </div>
        <div id="20231216213941-u2rc3lg" data-node-id="20231216213941-u2rc3lg" data-type="NodeParagraph" updated="20231216213941" class="p"><div spellcheck="false">published:Mon, 23 May 2022 01:44:05 GMT</div></div>
      </div></div><div id="20231216213941-wuuyt6p" data-node-id="20231216213941-wuuyt6p" data-type="NodeBlockquote" updated="20231216213941" class="bq"><div id="20231216213941-bgwx4l2" data-node-id="20231216213941-bgwx4l2" data-type="NodeParagraph" updated="20231216213941" class="p"><div spellcheck="false">Kubernetes is the new normal. Everyone knows and understands kubernetes, it's the defaultoption for now. Rolling out your own infra would be more expe...</div></div></div>
      </div></div><div id="20231216213941-gb1qpks" data-node-id="20231216213941-gb1qpks" data-type="NodeList" updated="20231216223246" data-subtype="t" class="list"><div id="20231216213941-u3iqnq2" data-node-id="20231216213941-u3iqnq2" data-type="NodeListItem" updated="20231216223246" data-subtype="t" class="li protyle-task--done " data-marker="*">
        <div class="protyle-action">
          <svg><use xlink:href="#iconCheck"></use></svg>
        </div>
        <h6 id="20231216213941-yde9fh7" data-node-id="20231216213941-yde9fh7" data-type="NodeHeading" updated="20231216213941" data-subtype="h6" class="h6"><a href="https://yifei.me/note/2258">迁移并升级 Elasticsearch 5.5 到 6.8</a></h6><div id="20231216213941-aaexcwx" data-node-id="20231216213941-aaexcwx" data-type="NodeList" updated="20231216213941" data-subtype="u" class="list"><div id="20231216213941-u60htez" data-node-id="20231216213941-u60htez" data-type="NodeListItem" updated="20231216213941" data-subtype="u" class="li" data-marker="*">
        <div class="protyle-action">
          <svg><use xlink:href="#iconDot"></use></svg>
        </div>
        <div id="20231216213941-bac90fn" data-node-id="20231216213941-bac90fn" data-type="NodeParagraph" updated="20231216213941" class="p"><div spellcheck="false">published:Mon, 23 May 2022 01:44:05 GMT</div></div>
      </div></div><div id="20231216213941-8rdflht" data-node-id="20231216213941-8rdflht" data-type="NodeBlockquote" updated="20231216213941" class="bq"><div id="20231216213941-f9mddyj" data-node-id="20231216213941-f9mddyj" data-type="NodeParagraph" updated="20231216213941" class="p"><div spellcheck="false">最近需要把一个 ES 5.5 的集群迁移到 K8S 上，因为目标环境中只有 ES 7 集群，所以在迁移过程中还需要升级下索引的版本。不过最终只升级到了 6.8。开始看到了一个 reindex 的 API，想着直接从老集群 reindex 过去就好了，结果发现不行。直接reindex 会丢掉类型信息。...</div></div></div>
      </div></div><div id="20231216213941-5sthb10" data-node-id="20231216213941-5sthb10" data-type="NodeList" updated="20231216222655" data-subtype="t" class="list"><div id="20231216213941-3eqafcq" data-node-id="20231216213941-3eqafcq" data-type="NodeListItem" updated="20231216222655" data-subtype="t" class="li protyle-task--done " data-marker="*">
        <div class="protyle-action">
          <svg><use xlink:href="#iconCheck"></use></svg>
        </div>
        <h6 id="20231216213941-ffk85og" data-node-id="20231216213941-ffk85og" data-type="NodeHeading" updated="20231216213941" data-subtype="h6" class="h6"><a href="https://yifei.me/note/2951">和风车决斗的堂吉诃德</a></h6><div id="20231216213941-hw5gijz" data-node-id="20231216213941-hw5gijz" data-type="NodeList" updated="20231216213941" data-subtype="u" class="list"><div id="20231216213941-yz3ud8o" data-node-id="20231216213941-yz3ud8o" data-type="NodeListItem" updated="20231216213941" data-subtype="u" class="li" data-marker="*">
        <div class="protyle-action">
          <svg><use xlink:href="#iconDot"></use></svg>
        </div>
        <div id="20231216213941-crp5bzq" data-node-id="20231216213941-crp5bzq" data-type="NodeParagraph" updated="20231216213941" class="p"><div spellcheck="false">published:Mon, 23 May 2022 15:41:15 GMT</div></div>
      </div></div><div id="20231216213941-c4qabvi" data-node-id="20231216213941-c4qabvi" data-type="NodeBlockquote" updated="20231216213941" class="bq"><div id="20231216213941-3hz9kfb" data-node-id="20231216213941-3hz9kfb" data-type="NodeParagraph" updated="20231216213941" class="p"><div spellcheck="false">今天不谈论代码了，写代码也救不了中国人。我们知道一个病毒的传播能力可以用 R0 来表示，即每个患者传染的新患者的数量。我们又知道，社会上除了占大多数的遵纪守法好公民，还有目无法纪的奸商、涣散烂漫的小市民和一小撮玩忽职守的领导干部。因此，当局制定的政策的传达效力是有限的，我们只能指望其中的好公民去 1...</div></div></div>
      </div></div><div id="20231216213941-7cjhj8f" data-node-id="20231216213941-7cjhj8f" data-type="NodeList" updated="20231216222815" data-subtype="t" class="list"><div id="20231216213941-tfapix3" data-node-id="20231216213941-tfapix3" data-type="NodeListItem" updated="20231216222815" data-subtype="t" class="li protyle-task--done " data-marker="*">
        <div class="protyle-action">
          <svg><use xlink:href="#iconCheck"></use></svg>
        </div>
        <h6 id="20231216213941-l29bjyt" data-node-id="20231216213941-l29bjyt" data-type="NodeHeading" updated="20231216213941" data-subtype="h6" class="h6"><a href="https://yifei.me/note/2899">单元测试的笔记和心得体会</a></h6><div id="20231216213941-7awosu2" data-node-id="20231216213941-7awosu2" data-type="NodeList" updated="20231216213941" data-subtype="u" class="list"><div id="20231216213941-bc0s41w" data-node-id="20231216213941-bc0s41w" data-type="NodeListItem" updated="20231216213941" data-subtype="u" class="li" data-marker="*">
        <div class="protyle-action">
          <svg><use xlink:href="#iconDot"></use></svg>
        </div>
        <div id="20231216213941-4jpewrs" data-node-id="20231216213941-4jpewrs" data-type="NodeParagraph" updated="20231216213941" class="p"><div spellcheck="false">published:Fri, 07 Oct 2022 16:01:40 GMT</div></div>
      </div></div><div id="20231216213941-pgh1xyy" data-node-id="20231216213941-pgh1xyy" data-type="NodeBlockquote" updated="20231216213941" class="bq"><div id="20231216213941-g1uk706" data-node-id="20231216213941-g1uk706" data-type="NodeParagraph" updated="20231216213941" class="p"><div spellcheck="false">编写优质测试的前提明确最小单元，以及单元的功能点都有哪些。如果在写代码之前都没有明确功能有哪些，或者编写 功能已经跑偏了，那么测试究竟测些什么呢？确定方案能够解决问题，然后再写测试，否则是徒劳的。编写测试的基本原则每一个测试单元必须完全独立。每一个必须能够独立运行，以及在其他的测试组中组合运行，不管...</div></div></div>
      </div></div><div id="20231216213941-8ok2ylj" data-node-id="20231216213941-8ok2ylj" data-type="NodeList" updated="20231216222819" data-subtype="t" class="list"><div id="20231216213941-edp5d8j" data-node-id="20231216213941-edp5d8j" data-type="NodeListItem" updated="20231216222819" data-subtype="t" class="li protyle-task--done " data-marker="*">
        <div class="protyle-action">
          <svg><use xlink:href="#iconCheck"></use></svg>
        </div>
        <h6 id="20231216213941-6lpz9id" data-node-id="20231216213941-6lpz9id" data-type="NodeHeading" updated="20231216213941" data-subtype="h6" class="h6"><a href="https://yifei.me/note/1105">kubectl 备忘录</a></h6><div id="20231216213941-jdi1x8b" data-node-id="20231216213941-jdi1x8b" data-type="NodeList" updated="20231216213941" data-subtype="u" class="list"><div id="20231216213941-cu8849h" data-node-id="20231216213941-cu8849h" data-type="NodeListItem" updated="20231216213941" data-subtype="u" class="li" data-marker="*">
        <div class="protyle-action">
          <svg><use xlink:href="#iconDot"></use></svg>
        </div>
        <div id="20231216213941-r24lryw" data-node-id="20231216213941-r24lryw" data-type="NodeParagraph" updated="20231216213941" class="p"><div spellcheck="false">published:Sat, 04 Jun 2022 08:20:08 GMT</div></div>
      </div></div><div id="20231216213941-1hqq9gt" data-node-id="20231216213941-1hqq9gt" data-type="NodeBlockquote" updated="20231216213941" class="bq"><div id="20231216213941-0h1cz23" data-node-id="20231216213941-0h1cz23" data-type="NodeParagraph" updated="20231216213941" class="p"><div spellcheck="false">查看集群资源获取各种资源列表：# -o 指定范围格式，<span data-type="code">-o wide</span>​​ 用来显示更详细信息kubectl get node/pod/deploy/node/svc -o wide/yaml/name描述详细信息：# -n 指定命名空间kubectl describe node/pod/deploy...</div></div></div>
      </div></div><div id="20231216213941-qdf5aj8" data-node-id="20231216213941-qdf5aj8" data-type="NodeList" updated="20231216223507" data-subtype="t" class="list"><div id="20231216213941-zwbf5oq" data-node-id="20231216213941-zwbf5oq" data-type="NodeListItem" updated="20231216223507" data-subtype="t" class="li protyle-task--done " data-marker="*">
        <div class="protyle-action">
          <svg><use xlink:href="#iconCheck"></use></svg>
        </div>
        <h6 id="20231216213941-ajjkhxg" data-node-id="20231216213941-ajjkhxg" data-type="NodeHeading" updated="20231216213941" data-subtype="h6" class="h6"><a href="https://yifei.me/note/2719">curl_cffi: 支持原生模拟浏览器 TLS/JA3 指纹的 Python 库</a></h6><div id="20231216213941-s2ky55i" data-node-id="20231216213941-s2ky55i" data-type="NodeList" updated="20231216213941" data-subtype="u" class="list"><div id="20231216213941-tg74ox5" data-node-id="20231216213941-tg74ox5" data-type="NodeListItem" updated="20231216213941" data-subtype="u" class="li" data-marker="*">
        <div class="protyle-action">
          <svg><use xlink:href="#iconDot"></use></svg>
        </div>
        <div id="20231216213941-66wnywd" data-node-id="20231216213941-66wnywd" data-type="NodeParagraph" updated="20231216213941" class="p"><div spellcheck="false">published:Sat, 28 Jan 2023 10:08:05 GMT</div></div>
      </div></div><div id="20231216213941-8wkcyzt" data-node-id="20231216213941-8wkcyzt" data-type="NodeBlockquote" updated="20231216213941" class="bq"><div id="20231216213941-tegjb50" data-node-id="20231216213941-tegjb50" data-type="NodeParagraph" updated="20231216213941" class="p"><div spellcheck="false">越来越多的网站开始使用 TLS 指纹反爬虫，而 Python 中竟然没有任何方法解决这个问题。前一阵看到由国外大神写了一个 curl-impersonate 命令行工具，可以完美模拟主流浏览器的指纹，遂用cffi 封装成了 Python 库 curl_cffi，这样就可以继续愉快地写爬虫啦！TLS ...</div></div></div>
      </div></div><div id="20231216213941-3ea8iie" data-node-id="20231216213941-3ea8iie" data-type="NodeList" updated="20231216222534" data-subtype="t" class="list"><div id="20231216213941-gfwc3s0" data-node-id="20231216213941-gfwc3s0" data-type="NodeListItem" updated="20231216222534" data-subtype="t" class="li protyle-task--done " data-marker="*">
        <div class="protyle-action">
          <svg><use xlink:href="#iconCheck"></use></svg>
        </div>
        <h6 id="20231216213941-0vzndy4" data-node-id="20231216213941-0vzndy4" data-type="NodeHeading" updated="20231216213941" data-subtype="h6" class="h6"><a href="https://yifei.me/note/3053">useReducer + useContext = (Better) Redux</a></h6><div id="20231216213941-balxbfo" data-node-id="20231216213941-balxbfo" data-type="NodeList" updated="20231216213941" data-subtype="u" class="list"><div id="20231216213941-73d9hde" data-node-id="20231216213941-73d9hde" data-type="NodeListItem" updated="20231216213941" data-subtype="u" class="li" data-marker="*">
        <div class="protyle-action">
          <svg><use xlink:href="#iconDot"></use></svg>
        </div>
        <div id="20231216213941-a20b0nb" data-node-id="20231216213941-a20b0nb" data-type="NodeParagraph" updated="20231216213941" class="p"><div spellcheck="false">published:Mon, 31 Oct 2022 13:45:05 GMT</div></div>
      </div></div><div id="20231216213941-qdv3lt1" data-node-id="20231216213941-qdv3lt1" data-type="NodeBlockquote" updated="20231216213941" class="bq"><div id="20231216213941-087bikb" data-node-id="20231216213941-087bikb" data-type="NodeParagraph" updated="20231216213941" class="p"><div spellcheck="false">useState 是 React 开发中最常用的一个钩子。但当程序稍微复杂一些的时候，只依赖 useState 就显得有些力不从心了，这时候需要一个全局状态管理工具。在我刚接触 React 时，看到的教程一般都推荐 redux，在经历过无数次的尝试之后，我发现以我的智商理解不了 redux 神奇的设...</div></div></div>
      </div></div><div id="20231216213941-mq6u7m9" data-node-id="20231216213941-mq6u7m9" data-type="NodeList" updated="20231216223255" data-subtype="t" class="list"><div id="20231216213941-7u2z1j1" data-node-id="20231216213941-7u2z1j1" data-type="NodeListItem" updated="20231216223255" data-subtype="t" class="li protyle-task--done " data-marker="*">
        <div class="protyle-action">
          <svg><use xlink:href="#iconCheck"></use></svg>
        </div>
        <h6 id="20231216213941-e0t77o4" data-node-id="20231216213941-e0t77o4" data-type="NodeHeading" updated="20231216213941" data-subtype="h6" class="h6"><a href="https://yifei.me/note/377">为什么不要加入创业公司</a></h6><div id="20231216213941-1tgty4d" data-node-id="20231216213941-1tgty4d" data-type="NodeList" updated="20231216213941" data-subtype="u" class="list"><div id="20231216213941-0etw9zr" data-node-id="20231216213941-0etw9zr" data-type="NodeListItem" updated="20231216213941" data-subtype="u" class="li" data-marker="*">
        <div class="protyle-action">
          <svg><use xlink:href="#iconDot"></use></svg>
        </div>
        <div id="20231216213941-0a9bf0l" data-node-id="20231216213941-0a9bf0l" data-type="NodeParagraph" updated="20231216213941" class="p"><div spellcheck="false">published:Sat, 19 Aug 2023 10:13:41 GMT</div></div>
      </div></div><div id="20231216213941-y5tc4om" data-node-id="20231216213941-y5tc4om" data-type="NodeBlockquote" updated="20231216213941" class="bq"><div id="20231216213941-umznxha" data-node-id="20231216213941-umznxha" data-type="NodeParagraph" updated="20231216213941" class="p"><div spellcheck="false">据统计，92% 的创业公司，活不过三年，一定不要盲选创业公司，为了创业而创业。你以为在中关村摆个柜台，十年之后就一定可以成为刘强东么？还有一个更搞笑的说法，说什么创业公司最大的财富都是在最后一个阶段产生的，所以任何时候上车都不晚，实际上这纯属扯淡。你在第一年加入，以后可能是一万倍的收益，而在最后一年...</div></div></div>
      </div></div><div id="20231216213941-wdntsht" data-node-id="20231216213941-wdntsht" data-type="NodeList" updated="20231216223516" data-subtype="t" class="list"><div id="20231216213941-dsrs8a6" data-node-id="20231216213941-dsrs8a6" data-type="NodeListItem" updated="20231216223516" data-subtype="t" class="li protyle-task--done " data-marker="*">
        <div class="protyle-action">
          <svg><use xlink:href="#iconCheck"></use></svg>
        </div>
        <h6 id="20231216213941-12ar4z1" data-node-id="20231216213941-12ar4z1" data-type="NodeHeading" updated="20231216213941" data-subtype="h6" class="h6"><a href="https://yifei.me/note/3016">FastAPI 使用路由模块化</a></h6><div id="20231216213941-62c5xqp" data-node-id="20231216213941-62c5xqp" data-type="NodeList" updated="20231216213941" data-subtype="u" class="list"><div id="20231216213941-anumt5y" data-node-id="20231216213941-anumt5y" data-type="NodeListItem" updated="20231216213941" data-subtype="u" class="li" data-marker="*">
        <div class="protyle-action">
          <svg><use xlink:href="#iconDot"></use></svg>
        </div>
        <div id="20231216213941-j0viv4m" data-node-id="20231216213941-j0viv4m" data-type="NodeParagraph" updated="20231216213941" class="p"><div spellcheck="false">published:Sat, 19 Aug 2023 12:12:30 GMT</div></div>
      </div></div><div id="20231216213941-5plvdtc" data-node-id="20231216213941-5plvdtc" data-type="NodeBlockquote" updated="20231216213941" class="bq"><div id="20231216213941-9g6zw9u" data-node-id="20231216213941-9g6zw9u" data-type="NodeParagraph" updated="20231216213941" class="p"><div spellcheck="false">FastAPI 中的 router 相当于 Flask 中的 Blueprint, 用来切分应用到不同的模块。# views/users.pyfrom fastapi import APIRouterrouter = APIRouter()@router.get("/me")def myinfo()...</div></div></div>
      </div></div><div id="20231216213941-1z0n9me" data-node-id="20231216213941-1z0n9me" data-type="NodeList" updated="20231216222528" data-subtype="t" class="list"><div id="20231216213941-i2va74z" data-node-id="20231216213941-i2va74z" data-type="NodeListItem" updated="20231216222528" data-subtype="t" class="li protyle-task--done " data-marker="*">
        <div class="protyle-action">
          <svg><use xlink:href="#iconCheck"></use></svg>
        </div>
        <h6 id="20231216213941-dmef58l" data-node-id="20231216213941-dmef58l" data-type="NodeHeading" updated="20231216213941" data-subtype="h6" class="h6"><a href="https://yifei.me/note/2892">GitHub Actions 的简单使用和调试</a></h6><div id="20231216213941-8i7fbeo" data-node-id="20231216213941-8i7fbeo" data-type="NodeList" updated="20231216213941" data-subtype="u" class="list"><div id="20231216213941-qrv9xwz" data-node-id="20231216213941-qrv9xwz" data-type="NodeListItem" updated="20231216213941" data-subtype="u" class="li" data-marker="*">
        <div class="protyle-action">
          <svg><use xlink:href="#iconDot"></use></svg>
        </div>
        <div id="20231216213941-l8q8hdn" data-node-id="20231216213941-l8q8hdn" data-type="NodeParagraph" updated="20231216213941" class="p"><div spellcheck="false">published:Sat, 19 Aug 2023 12:12:30 GMT</div></div>
      </div></div><div id="20231216213941-7qsrcvr" data-node-id="20231216213941-7qsrcvr" data-type="NodeBlockquote" updated="20231216213941" class="bq"><div id="20231216213941-rqg4839" data-node-id="20231216213941-rqg4839" data-type="NodeParagraph" updated="20231216213941" class="p"><div spellcheck="false">GitHub Actions 使用 yaml 配置，必须放置在 .github/workflows 目录。# 名字name: hello-world-example# 环境变量env:  FOO: bar# 触发条件on:  # 最常用的是 push 条件，如果留空，表示每次 push 都执行。  ...</div></div></div>
      </div></div><div id="20231216213941-k1y9bc5" data-node-id="20231216213941-k1y9bc5" data-type="NodeList" updated="20231216223249" data-subtype="t" class="list"><div id="20231216213941-a34ab5h" data-node-id="20231216213941-a34ab5h" data-type="NodeListItem" updated="20231216223249" data-subtype="t" class="li protyle-task--done " data-marker="*">
        <div class="protyle-action">
          <svg><use xlink:href="#iconCheck"></use></svg>
        </div>
        <h6 id="20231216213941-wbwkkpf" data-node-id="20231216213941-wbwkkpf" data-type="NodeHeading" updated="20231216213941" data-subtype="h6" class="h6">​<a href="https://yifei.me/note/2816"><span data-type="code">just</span></a>​​<a href="https://yifei.me/note/2816">，一个现代版的 </a><a href="https://yifei.me/note/2816"><span data-type="code">make</span></a>​​</h6><div id="20231216213941-8boyi4o" data-node-id="20231216213941-8boyi4o" data-type="NodeList" updated="20231216213941" data-subtype="u" class="list"><div id="20231216213941-gg3sclc" data-node-id="20231216213941-gg3sclc" data-type="NodeListItem" updated="20231216213941" data-subtype="u" class="li" data-marker="*">
        <div class="protyle-action">
          <svg><use xlink:href="#iconDot"></use></svg>
        </div>
        <div id="20231216213941-hasx6r3" data-node-id="20231216213941-hasx6r3" data-type="NodeParagraph" updated="20231216213941" class="p"><div spellcheck="false">published:Sat, 19 Aug 2023 12:12:30 GMT</div></div>
      </div></div><div id="20231216213941-1psrn9w" data-node-id="20231216213941-1psrn9w" data-type="NodeBlockquote" updated="20231216213941" class="bq"><div id="20231216213941-7dm7pt0" data-node-id="20231216213941-7dm7pt0" data-type="NodeParagraph" updated="20231216213941" class="p"><div spellcheck="false">我们知道 make 包含了两个主要功能：构建 C 工程运行具有依赖关系的任务而由于 make 的时代太过久远，导致现在用起来会有几个坑爹之处：声明变量语法奇怪每次都加 .PHONY 很麻烦配置 SHELL 也很反直觉多行命令不在同一个 shell 中运行必须用 \t 缩进另一方面，我也只需要运行任务...</div></div></div>
      </div></div><div id="20231216213941-07ykxtc" data-node-id="20231216213941-07ykxtc" data-type="NodeList" updated="20231216222459" data-subtype="t" class="list"><div id="20231216213941-qsd5xg6" data-node-id="20231216213941-qsd5xg6" data-type="NodeListItem" updated="20231216222459" data-subtype="t" class="li protyle-task--done " data-marker="*">
        <div class="protyle-action">
          <svg><use xlink:href="#iconCheck"></use></svg>
        </div>
        <h6 id="20231216213941-kxr42vq" data-node-id="20231216213941-kxr42vq" data-type="NodeHeading" updated="20231216213941" data-subtype="h6" class="h6"><a href="https://yifei.me/note/2473">使用 SQLite 作为文档数据库</a></h6><div id="20231216213941-qecjyxv" data-node-id="20231216213941-qecjyxv" data-type="NodeList" updated="20231216213941" data-subtype="u" class="list"><div id="20231216213941-facbc3s" data-node-id="20231216213941-facbc3s" data-type="NodeListItem" updated="20231216213941" data-subtype="u" class="li" data-marker="*">
        <div class="protyle-action">
          <svg><use xlink:href="#iconDot"></use></svg>
        </div>
        <div id="20231216213941-xo5o3x4" data-node-id="20231216213941-xo5o3x4" data-type="NodeParagraph" updated="20231216213941" class="p"><div spellcheck="false">published:Sat, 19 Aug 2023 12:12:30 GMT</div></div>
      </div></div><div id="20231216213941-b1kj7kc" data-node-id="20231216213941-b1kj7kc" data-type="NodeBlockquote" updated="20231216213941" class="bq"><div id="20231216213941-uq9wfu3" data-node-id="20231216213941-uq9wfu3" data-type="NodeParagraph" updated="20231216213941" class="p"><div spellcheck="false">本文需要 SQLite = 3.31.0(2020-01-22)在 SQLite 的新版本中已经支持了 json 函数 (json_extract)，我们完全可以把它当做一个文档数据库使用。而且更妙的是，还可以直接添加"合成列"(generated column), 也就是使用 json 中的字段作...</div></div></div>
      </div></div><div id="20231216213941-bxwrh8j" data-node-id="20231216213941-bxwrh8j" data-type="NodeList" updated="20231216223615" data-subtype="t" class="list"><div id="20231216213941-ehwkut5" data-node-id="20231216213941-ehwkut5" data-type="NodeListItem" updated="20231216223615" data-subtype="t" class="li protyle-task--done " data-marker="*">
        <div class="protyle-action">
          <svg><use xlink:href="#iconCheck"></use></svg>
        </div>
        <h6 id="20231216213941-5vjkz5o" data-node-id="20231216213941-5vjkz5o" data-type="NodeHeading" updated="20231216213941" data-subtype="h6" class="h6"><a href="https://yifei.me/note/2457">在子线程中 fork 会怎样？</a></h6><div id="20231216213941-zn4xldz" data-node-id="20231216213941-zn4xldz" data-type="NodeList" updated="20231216213941" data-subtype="u" class="list"><div id="20231216213941-l02khz0" data-node-id="20231216213941-l02khz0" data-type="NodeListItem" updated="20231216213941" data-subtype="u" class="li" data-marker="*">
        <div class="protyle-action">
          <svg><use xlink:href="#iconDot"></use></svg>
        </div>
        <div id="20231216213941-b8nk9kq" data-node-id="20231216213941-b8nk9kq" data-type="NodeParagraph" updated="20231216213941" class="p"><div spellcheck="false">published:Sat, 19 Aug 2023 12:12:30 GMT</div></div>
      </div></div><div id="20231216213941-ii0azrv" data-node-id="20231216213941-ii0azrv" data-type="NodeBlockquote" updated="20231216213941" class="bq"><div id="20231216213941-5dhw59p" data-node-id="20231216213941-5dhw59p" data-type="NodeParagraph" updated="20231216213941" class="p"><div spellcheck="false">按照 posix 的规范来说，fork 之后的进程中，应该只有调用 fork 的那个线程。但是实际上，所有线程都在，只是除了调用 fork 的线程以外，其他线程都被冻结了，并不会执行。一般来说，在 fork之后继续执行 exec* 的话，是不会有什么大问题的。fork 复制的是整个进程的空间，锁也会...</div></div></div>
      </div></div><div id="20231216213941-epsxfwe" data-node-id="20231216213941-epsxfwe" data-type="NodeList" updated="20231216223623" data-subtype="t" class="list"><div id="20231216213941-z56716m" data-node-id="20231216213941-z56716m" data-type="NodeListItem" updated="20231216223623" data-subtype="t" class="li protyle-task--done " data-marker="*">
        <div class="protyle-action">
          <svg><use xlink:href="#iconCheck"></use></svg>
        </div>
        <h6 id="20231216213941-yo8mbwg" data-node-id="20231216213941-yo8mbwg" data-type="NodeHeading" updated="20231216213941" data-subtype="h6" class="h6"><a href="https://yifei.me/note/2405">在 Python 中使用 SQLite</a></h6><div id="20231216213941-vcjl1s4" data-node-id="20231216213941-vcjl1s4" data-type="NodeList" updated="20231216213941" data-subtype="u" class="list"><div id="20231216213941-btmxnl7" data-node-id="20231216213941-btmxnl7" data-type="NodeListItem" updated="20231216213941" data-subtype="u" class="li" data-marker="*">
        <div class="protyle-action">
          <svg><use xlink:href="#iconDot"></use></svg>
        </div>
        <div id="20231216213941-7a0ib09" data-node-id="20231216213941-7a0ib09" data-type="NodeParagraph" updated="20231216213941" class="p"><div spellcheck="false">published:Sat, 19 Aug 2023 12:12:30 GMT</div></div>
      </div></div><div id="20231216213941-fgua0dg" data-node-id="20231216213941-fgua0dg" data-type="NodeBlockquote" updated="20231216213941" class="bq"><div id="20231216213941-f0spqc6" data-node-id="20231216213941-f0spqc6" data-type="NodeParagraph" updated="20231216213941" class="p"><div spellcheck="false">首先连接到数据库，获得 connection 对象，然后再获得 cursor，使用 cursor 来执行 sql 语句并获取结果。连接import sqlite3db = sqlite3.connect("database.db")  # connectionsdb.execute("CREATE ...</div></div></div>
      </div></div><div id="20231216213941-egep4yi" data-node-id="20231216213941-egep4yi" data-type="NodeList" updated="20231216223618" data-subtype="t" class="list"><div id="20231216213941-7o9f65u" data-node-id="20231216213941-7o9f65u" data-type="NodeListItem" updated="20231216223618" data-subtype="t" class="li protyle-task--done " data-marker="*">
        <div class="protyle-action">
          <svg><use xlink:href="#iconCheck"></use></svg>
        </div>
        <h6 id="20231216213941-gvk4t0w" data-node-id="20231216213941-gvk4t0w" data-type="NodeHeading" updated="20231216213941" data-subtype="h6" class="h6"><a href="https://yifei.me/note/347">代码大全阅读笔记（待续）</a></h6><div id="20231216213941-qipcig1" data-node-id="20231216213941-qipcig1" data-type="NodeList" updated="20231216213941" data-subtype="u" class="list"><div id="20231216213941-j0pvxng" data-node-id="20231216213941-j0pvxng" data-type="NodeListItem" updated="20231216213941" data-subtype="u" class="li" data-marker="*">
        <div class="protyle-action">
          <svg><use xlink:href="#iconDot"></use></svg>
        </div>
        <div id="20231216213941-ctw825b" data-node-id="20231216213941-ctw825b" data-type="NodeParagraph" updated="20231216213941" class="p"><div spellcheck="false">published:Sat, 19 Aug 2023 12:12:30 GMT</div></div>
      </div></div><div id="20231216213941-7g48obk" data-node-id="20231216213941-7g48obk" data-type="NodeBlockquote" updated="20231216213941" class="bq"><div id="20231216213941-26kc5v3" data-node-id="20231216213941-26kc5v3" data-type="NodeParagraph" updated="20231216213941" class="p"><div spellcheck="false">TODO: 总结作为技术员工，你的一部分工作就是培训周围的非技术人员，讲解开发过程。在软件开发过程中，如果需求被污染了，那么他就会污染架构，而架构又会污染构建。这样会导致程序员脾气暴躁、营养失调；开发出的程序具有放射性污染，而且周身都是缺陷。发现错误的时间要尽可能接近引入错误的时间。问题定义应该用客...</div></div></div>
      </div></div><div id="20231216213913-2uc2546" data-node-id="20231216213913-2uc2546" data-type="NodeList" updated="20231216223601" data-subtype="t" class="list"><div id="20231216213913-n064i5k" data-node-id="20231216213913-n064i5k" data-type="NodeListItem" updated="20231216223601" data-subtype="t" class="li protyle-task--done " data-marker="*">
        <div class="protyle-action">
          <svg><use xlink:href="#iconCheck"></use></svg>
        </div>
        <h6 id="20231216213913-561m067" data-node-id="20231216213913-561m067" data-type="NodeHeading" updated="20231216213913" data-subtype="h6" class="h6"><a href="https://yifei.me/note/3001">读书的乐趣</a></h6><div id="20231216213913-43zvggj" data-node-id="20231216213913-43zvggj" data-type="NodeList" updated="20231216213913" data-subtype="u" class="list"><div id="20231216213913-622eek5" data-node-id="20231216213913-622eek5" data-type="NodeListItem" updated="20231216213913" data-subtype="u" class="li" data-marker="*">
        <div class="protyle-action">
          <svg><use xlink:href="#iconDot"></use></svg>
        </div>
        <div id="20231216213913-sp20vu2" data-node-id="20231216213913-sp20vu2" data-type="NodeParagraph" updated="20231216213913" class="p"><div spellcheck="false">published:Sat, 19 Aug 2023 16:33:25 GMT</div></div>
      </div></div><div id="20231216213913-tamh0fu" data-node-id="20231216213913-tamh0fu" data-type="NodeBlockquote" updated="20231216213913" class="bq"><div id="20231216213913-zg69pdh" data-node-id="20231216213913-zg69pdh" data-type="NodeParagraph" updated="20231216213913" class="p"><div spellcheck="false">有一天，一个叫 Alice 的六岁小女孩打来电话问了一个问题。她问，我是个好孩子，我弟弟是个坏孩子。爸爸妈妈要求我们每晚 9 点上床睡觉，每一次我都很听话，按时上床。可弟弟却不听话，每次要一个苹果才肯上床，而他居然每次都能得逞。我也想要一个苹果，但父母从来不给我。为什么弟弟是个坏孩子，他总能得到苹果...</div></div></div>
      </div></div><div id="20231216213857-a029jyq" data-node-id="20231216213857-a029jyq" data-type="NodeList" updated="20231216223604" data-subtype="t" class="list"><div id="20231216213857-pzfdgxt" data-node-id="20231216213857-pzfdgxt" data-type="NodeListItem" updated="20231216223604" data-subtype="t" class="li protyle-task--done " data-marker="*">
        <div class="protyle-action">
          <svg><use xlink:href="#iconCheck"></use></svg>
        </div>
        <h6 id="20231216213857-sr1a69d" data-node-id="20231216213857-sr1a69d" data-type="NodeHeading" updated="20231216213857" data-subtype="h6" class="h6"><a href="https://yifei.me/note/1098">Podman 对比 Docker 使用笔记</a></h6><div id="20231216213857-b3v9410" data-node-id="20231216213857-b3v9410" data-type="NodeList" updated="20231216213857" data-subtype="u" class="list"><div id="20231216213857-3qs8slr" data-node-id="20231216213857-3qs8slr" data-type="NodeListItem" updated="20231216213857" data-subtype="u" class="li" data-marker="*">
        <div class="protyle-action">
          <svg><use xlink:href="#iconDot"></use></svg>
        </div>
        <div id="20231216213857-69yy4i0" data-node-id="20231216213857-69yy4i0" data-type="NodeParagraph" updated="20231216213857" class="p"><div spellcheck="false">published:Sat, 19 Aug 2023 12:12:30 GMT</div></div>
      </div></div><div id="20231216213857-jnl89d3" data-node-id="20231216213857-jnl89d3" data-type="NodeBlockquote" updated="20231216213857" class="bq"><div id="20231216213857-os0kehf" data-node-id="20231216213857-os0kehf" data-type="NodeParagraph" updated="20231216213857" class="p"><div spellcheck="false">podman 基本上和 docker 命令兼容没有 daemon，默认不使用 root可以导出 k8s 部署配置可以一键停止删除所有容器，stop -a, rm -a, rmi -a 等增加了 -l、--latest 选项，直接操作上一个 container，而不需要找到 id 然后再操作。Podm...</div></div></div>
      </div></div><div id="20231216213803-4r4i8v5" data-node-id="20231216213803-4r4i8v5" data-type="NodeList" updated="20231216215516" data-subtype="t" class="list"><div id="20231216213803-w4fvx43" data-node-id="20231216213803-w4fvx43" data-type="NodeListItem" updated="20231216215516" data-subtype="t" class="li protyle-task--done " data-marker="*">
        <div class="protyle-action">
          <svg><use xlink:href="#iconCheck"></use></svg>
        </div>
        <h6 id="20231216213803-qb2th8r" data-node-id="20231216213803-qb2th8r" data-type="NodeHeading" updated="20231216213803" data-subtype="h6" class="h6"><a href="https://yifei.me/note/425">Linux 命令行压缩工具</a></h6><div id="20231216213803-0zgbbnv" data-node-id="20231216213803-0zgbbnv" data-type="NodeList" updated="20231216213803" data-subtype="u" class="list"><div id="20231216213803-a8xloke" data-node-id="20231216213803-a8xloke" data-type="NodeListItem" updated="20231216213803" data-subtype="u" class="li" data-marker="*">
        <div class="protyle-action">
          <svg><use xlink:href="#iconDot"></use></svg>
        </div>
        <div id="20231216213803-xgplgud" data-node-id="20231216213803-xgplgud" data-type="NodeParagraph" updated="20231216213803" class="p"><div spellcheck="false">published:Sat, 19 Aug 2023 12:12:30 GMT</div></div>
      </div></div><div id="20231216213803-g7x7hg3" data-node-id="20231216213803-g7x7hg3" data-type="NodeBlockquote" updated="20231216213803" class="bq"><div id="20231216213803-ip6afmb" data-node-id="20231216213803-ip6afmb" data-type="NodeParagraph" updated="20231216213803" class="p"><div spellcheck="false">压缩文件主要分四类：tar.gz 或者 tgz 文件zip 文件rar 文件，Linux 下几乎没有7z 文件tar.gz 文件压缩tar cvzf FILES...解压tar xvzf TARBALLzip 文件zip -r ZIPFILE DIRECTORY to zip a directory...</div></div></div>
      </div></div><div id="20231216213852-mm7v4y8" data-node-id="20231216213852-mm7v4y8" data-type="NodeParagraph" class="p"><div spellcheck="false"></div></div></div>
  <div id="oceanpress-right-sidebar"></div>
</div>
  <script src="https://fastly.jsdelivr.net/gh/siyuan-note/oceanpress@1.0.6/apps/frontend/public/notebook/appearance/icons/material/icon.js?2.10.5"></script>
  <script src="https://fastly.jsdelivr.net/gh/siyuan-note/oceanpress@1.0.6/apps/frontend/public/notebook/stage/build/export/protyle-method.js?2.10.5"></script>
  <script src="https://fastly.jsdelivr.net/gh/siyuan-note/oceanpress@1.0.6/apps/frontend/public/notebook/stage/protyle/js/lute/lute.min.js?2.10.5"></script>
  <script>
    window.siyuan = {
      config: {
        appearance: {
          mode: isNightTime()?1:0,//主题 明亮=0 暗黑=1
          codeBlockThemeDark: "base16/dracula",
          codeBlockThemeLight: "github",
        },
        editor: {
          codeLineWrap: true,
          codeLigatures: false,
          plantUMLServePath: "https://www.plantuml.com/plantuml/svg/~1",
          codeSyntaxHighlightLineNum: true,
          katexMacros: JSON.stringify({}),
        },
      },
      languages: { copy: "复制" },
    };
    const cdn = "https://fastly.jsdelivr.net/gh/siyuan-note/oceanpress@1.0.6/apps/frontend/public/notebook/stage/protyle";
    const previewElement = document.getElementById("preview");

    Protyle.highlightRender(previewElement, cdn);
    Protyle.mathRender(previewElement, cdn, false);
    Protyle.mermaidRender(previewElement, cdn);
    Protyle.flowchartRender(previewElement, cdn);
    Protyle.graphvizRender(previewElement, cdn);
    Protyle.chartRender(previewElement, cdn);
    Protyle.mindmapRender(previewElement, cdn);
    Protyle.abcRender(previewElement, cdn);
    Protyle.htmlRender(previewElement);
    Protyle.plantumlRender(previewElement, cdn);
    document.querySelectorAll(".protyle-action__copy").forEach((item) => {
      item.addEventListener("click", (event) => {
        navigator.clipboard.writeText(
          item.parentElement.nextElementSibling.textContent.trimEnd(),
        );
        event.preventDefault();
        event.stopPropagation();
      });
    });
  </script>
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7181140659254262"
crossorigin="anonymous"></script><footer style="margin-top: 30px; padding: 20px; background-color: #f8f9fa; text-align: center;">
  <p style="margin: 0;">
    技术支持：
    <a target="_blank" href="https://github.com/2234839/oceanPress_js" style="color: #007bff; text-decoration: none;">OceanPress</a> |
    <a target="_blank" href="https://heartstack.space/user/%E5%AD%90%E8%99%9A/posts" style="color: #007bff; text-decoration: none;">崮生（子虚）</a> |
    <a target="_blank" href="//beian.miit.gov.cn" style="color: #007bff; text-decoration: none;">湘ICP备18021783号-1</a>
  </p>
</footer>
<script src="https://cdn.jsdelivr.net/npm/@docsearch/js@3"></script>
<script type="text/javascript">
  docsearch({
    appId: "UBOM0V691R",
    apiKey: "0c572ae8b8611d29477570967f44c3cf",
    indexName: "shenzilong",
    insights: true, 
    container: '#search',
    debug: false
  });
</script>

</body>
</html>