import{_ as t}from"../../chunks/preload-helper-9f12a5fd.js";import{S as e,i as n,s as r,e as l,k as o,c as a,a as c,n as s,d as f,f as h,D as i,t as u,g as d,h as p,G as g,a4 as v,b as m,aa as E,K as w,F as $,a8 as y,z as T}from"../../chunks/vendor-07ad4faf.js";function x(t,e,n){const r=t.slice();return r[11]=e[n],r}function b(t,e,n){const r=t.slice();return r[14]=e[n],r}function _(t,e,n){const r=t.slice();return r[11]=e[n],r}function A(t,e,n){const r=t.slice();return r[14]=e[n],r}function D(t){let e,n,r=t[14]+"";return{c(){e=l("td"),n=u(r)},l(t){e=a(t,"TD",{});var l=c(e);n=d(l,r),l.forEach(f)},m(t,r){h(t,e,r),i(e,n)},p(t,e){8&e&&r!==(r=t[14]+"")&&p(n,r)},d(t){t&&f(e)}}}function R(t){let e,n,r=t[11],u=[];for(let l=0;l<r.length;l+=1)u[l]=D(A(t,r,l));return{c(){e=l("tr");for(let t=0;t<u.length;t+=1)u[t].c();n=o()},l(t){e=a(t,"TR",{});var r=c(e);for(let e=0;e<u.length;e+=1)u[e].l(r);n=s(r),r.forEach(f)},m(t,r){h(t,e,r);for(let n=0;n<u.length;n+=1)u[n].m(e,null);i(e,n)},p(t,l){if(8&l){let o;for(r=t[11],o=0;o<r.length;o+=1){const a=A(t,r,o);u[o]?u[o].p(a,l):(u[o]=D(a),u[o].c(),u[o].m(e,n))}for(;o<u.length;o+=1)u[o].d(1);u.length=r.length}},d(t){t&&f(e),g(u,t)}}}function L(t){let e,n,r=t[14]+"";return{c(){e=l("td"),n=u(r)},l(t){e=a(t,"TD",{});var l=c(e);n=d(l,r),l.forEach(f)},m(t,r){h(t,e,r),i(e,n)},p(t,e){1&e&&r!==(r=t[14]+"")&&p(n,r)},d(t){t&&f(e)}}}function j(t){let e,n,r=t[11],u=[];for(let l=0;l<r.length;l+=1)u[l]=L(b(t,r,l));return{c(){e=l("tr");for(let t=0;t<u.length;t+=1)u[t].c();n=o()},l(t){e=a(t,"TR",{});var r=c(e);for(let e=0;e<u.length;e+=1)u[e].l(r);n=s(r),r.forEach(f)},m(t,r){h(t,e,r);for(let n=0;n<u.length;n+=1)u[n].m(e,null);i(e,n)},p(t,l){if(1&l){let o;for(r=t[11],o=0;o<r.length;o+=1){const a=b(t,r,o);u[o]?u[o].p(a,l):(u[o]=L(a),u[o].c(),u[o].m(e,n))}for(;o<u.length;o+=1)u[o].d(1);u.length=r.length}},d(t){t&&f(e),g(u,t)}}}function k(t){let e,n,r,p,T,b,A,D,L,k,I,V,B,P,U,F,O,q,z,G,H,K=t[3],N=[];for(let l=0;l<K.length;l+=1)N[l]=R(_(t,K,l));let S=t[0],X=[];for(let l=0;l<S.length;l+=1)X[l]=j(x(t,S,l));return{c(){e=o(),n=l("h2"),r=u("csv 转换器"),p=o(),T=l("input"),b=o(),A=l("div"),D=u("转换规则 "),L=l("textarea"),k=o(),I=l("div"),V=u("左侧是经过转换规则得到的表格，右侧是原始数据 "),B=l("a"),P=u("下载转换后的表格"),U=o(),F=l("div"),O=l("tabel");for(let t=0;t<N.length;t+=1)N[t].c();q=o(),z=l("tabel");for(let t=0;t<X.length;t+=1)X[t].c();this.h()},l(t){v('[data-svelte="svelte-xt56rk"]',document.head).forEach(f),e=s(t),n=a(t,"H2",{});var l=c(n);r=d(l,"csv 转换器"),l.forEach(f),p=s(t),T=a(t,"INPUT",{accept:!0,type:!0,placeholder:!0}),b=s(t),A=a(t,"DIV",{});var o=c(A);D=d(o,"转换规则 "),L=a(o,"TEXTAREA",{cols:!0,rows:!0,placeholder:!0}),c(L).forEach(f),o.forEach(f),k=s(t),I=a(t,"DIV",{});var h=c(I);V=d(h,"左侧是经过转换规则得到的表格，右侧是原始数据 "),B=a(h,"A",{download:!0,href:!0});var i=c(B);P=d(i,"下载转换后的表格"),i.forEach(f),h.forEach(f),U=s(t),F=a(t,"DIV",{class:!0});var u=c(F);O=a(u,"TABEL",{class:!0});var g=c(O);for(let e=0;e<N.length;e+=1)N[e].l(g);g.forEach(f),q=s(u),z=a(u,"TABEL",{});var m=c(z);for(let e=0;e<X.length;e+=1)X[e].l(m);m.forEach(f),u.forEach(f),this.h()},h(){document.title="csv 在线数据映射工具",m(T,"accept",".csv"),m(T,"type","file"),m(T,"placeholder","请选择 .csv 文件"),m(L,"cols","40"),m(L,"rows","10"),m(L,"placeholder","在这里输入 js 代码来控制转换方式"),m(B,"download","table.csv"),m(B,"href",t[4]),m(O,"class","mr-2"),m(F,"class","flex")},m(l,o){h(l,e,o),h(l,n,o),i(n,r),h(l,p,o),h(l,T,o),h(l,b,o),h(l,A,o),i(A,D),i(A,L),E(L,t[2]),h(l,k,o),h(l,I,o),i(I,V),i(I,B),i(B,P),h(l,U,o),h(l,F,o),i(F,O);for(let t=0;t<N.length;t+=1)N[t].m(O,null);i(F,q),i(F,z);for(let t=0;t<X.length;t+=1)X[t].m(z,null);G||(H=[w(T,"change",t[8]),w(L,"input",t[9])],G=!0)},p(t,[e]){if(4&e&&E(L,t[2]),16&e&&m(B,"href",t[4]),8&e){let n;for(K=t[3],n=0;n<K.length;n+=1){const r=_(t,K,n);N[n]?N[n].p(r,e):(N[n]=R(r),N[n].c(),N[n].m(O,null))}for(;n<N.length;n+=1)N[n].d(1);N.length=K.length}if(1&e){let n;for(S=t[0],n=0;n<S.length;n+=1){const r=x(t,S,n);X[n]?X[n].p(r,e):(X[n]=j(r),X[n].c(),X[n].m(z,null))}for(;n<X.length;n+=1)X[n].d(1);X.length=S.length}},i:$,o:$,d(t){t&&f(e),t&&f(n),t&&f(p),t&&f(T),t&&f(b),t&&f(A),t&&f(k),t&&f(I),t&&f(U),t&&f(F),g(N,t),g(X,t),G=!1,y(H)}}}function I(e,n,r){let l,o,a,c;var s=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(l,o){function a(t){try{s(r.next(t))}catch(e){o(e)}}function c(t){try{s(r.throw(t))}catch(e){o(e)}}function s(t){var e;t.done?l(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,c)}s((r=r.apply(t,e||[])).next())}))};let f,h,i=[[]],u=t=>"";return T((()=>s(void 0,void 0,void 0,(function*(){const e=yield t((()=>import("../../chunks/papaparse.min-9c5c5f3b.js").then((function(t){return t.p}))),["/_app/chunks/papaparse.min-9c5c5f3b.js","/_app/chunks/vendor-07ad4faf.js"]);r(5,f=new FileReader),f.addEventListener("load",(t=>{const n=f.result,l=e.parse(n,{});r(0,i=l.data)})),r(6,u=t=>{const n=e.unparse(t,{quotes:!0});console.log("[resText]",n);const r=new Blob([n],{type:"text/plain"});return URL.createObjectURL(r)})})))),i.map(((t,e)=>[`[${t[0]}](${t[1]})`,t[2]])),e.$$.update=()=>{2&e.$$.dirty&&r(7,l=null==h?void 0:h[0]),128&e.$$.dirty&&console.log(l),160&e.$$.dirty&&l&&f.readAsText(l),5&e.$$.dirty&&r(3,a=function(t,e){if("undefined"==typeof window)return t;try{return null===window||void 0===window?void 0:window.eval(e)(t)}catch(n){return console.error(n),t}}(i,o)),72&e.$$.dirty&&r(4,c=u(a))},r(2,o='tabel=> tabel.map((tr, tr_i) => [`<a href="${tr[1]}">${tr[0]}</a>`,tr[2]])'),[i,h,o,a,c,f,u,l,function(){h=this.files,r(1,h)},function(){o=this.value,r(2,o)}]}export default class extends e{constructor(t){super(),n(this,t,I,k,r,{})}}
