> 我想使用 serverless 写一个小应用
> {: id="20201231214250-7ca5hx5"}
>
> 那么我的状态放在哪呢？
> {: id="20201231214308-v7ca7ik"}
>
> 数据库？磁盘？
> {: id="20201231214320-epn34g1"}
{: id="20201231214224-a8w7gcz"}

假设我们应用现在有个状态 State1 用来记录访客数量，这个状态存在类似于 oss 这样的云服务上
{: id="20201231214348-pjlyx1m"}

应用部署到 serverless 平台后调起了两个实例  App1 App2
{: id="20201231220337-o9ck5yx"}

App1 启动的时候从 oss 拉取状态得知 `State1 = 60`
{: id="20201231220737-kc9prkn"}

App2 启动的时候从 oss 拉取状态得知 `State1 = 63` (比 App1 晚启动)
{: id="20201231220808-3cchj2t"}

这时实例 App1 App2 同时被访问了，他们都想执行 `State1+=1` 这样的操作然后保存这个状态到 oss 去
{: id="20201231220518-c3wruyn"}

要怎么实现这样的逻辑呢？
{: id="20201231220933-h3h5013"}

{: id="20201231220440-rvaz0x6"}

{: id="20201231220325-w3q5f6u"}


{: id="20201231214224-yxqubps" type="doc"}
