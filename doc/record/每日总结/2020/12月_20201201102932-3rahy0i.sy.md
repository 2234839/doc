# 12 月的每日总结
{: id="20201201103016-97kh8cd"}

12 月了时间过的真快。....
{: id="20201201103047-ipkbhog"}

---

[JavaScript 语句后应该加分号么？ - 贺师俊的回答 - 知乎](https://www.zhihu.com/question/20298345/answer/14670020) 关于这个问题我一贯的倾向是我不会主动写不必要的分号，依靠格式化工具自动添加分号。我倾向于无分号派 (^ 人 ^) 。
{: id="20201201103205-8ym5wiv"}

> 不要奢望工具能解决人的问题
> {: id="20201201103348-4ba9dvx"}
{: id="20201201103333-hu4fu41"}

分号也是工具，一律添加不如不要。他应该要在合适的位置去解决歧义，而非漫天都是。
{: id="20201201103357-ek32ke5"}

---

## #QQ 邮箱# #自动化脚本# 删除收信规则
{: id="20201201172239-qjncq95"}

之前因为一些原因在 QQ 邮箱中添加了很多的收信规则，现在想删除。但一个一个点实在太麻烦了，故写了如下脚本
{: id="20201201172548-91u95wz"}

```javascript
const qAll = (s) => top[1].document.querySelectorAll(s);

setInterval(() => {
  [...qAll(`[id*="ruleRc_"]`)]
    .filter((el) => el.textContent.includes("移动到 邮件归档"))[0]
    .querySelector(" div.col3 > a:nth-child(2)")
    .click();
  setTimeout(() => {
    document.querySelector("#QMconfirm_QMDialog_confirm").click();
  }, 100);
}, 1000);
```
{: id="20201201172359-es9ip4w"}

这个脚本很容易懂，也可以很容易的修改其中自定义的过滤规则来决定要删除什么样的收信规则
{: id="20201201172422-s6d9xh1"}

---

## 阿里 iconfont 多颜色设定尝试
{: id="20201202172447-h8sla4x"}

<iframe src="https://svelte.dev/repl/f5526b69512843b8b25f63ed4f5a49ab?version=3.30.1" width=700 height=400 ></iframe>

{: id="20201202172453-qcy348s"}

[demo 地址](https://svelte.dev/repl/f5526b69512843b8b25f63ed4f5a49ab?version=3.30.1)
{: id="20201202172507-dl4ube5"}

![效果图](assets/20201202172733-fkc599s-image.png)
{: id="20201202172716-shcib3b"}

```html
<svg class="icon" aria-hidden="true">
    <use xlink:href="#icon-xiangxia"></use>
</svg>
<svg class="icon" aria-hidden="true" style="--c1:red;--c2:green">
    <use xlink:href="#icon-xiangxia"></use>
</svg>
<svg class="icon" aria-hidden="true" style="--c1:#333;--c2:red">
    <use xlink:href="#icon-xiangxia"></use>
</svg>
```
{: id="20201202172742-z7rd34y"}

经过一定的处理后可以通过((20201202172848-w21p8ky "CSS 变量"))来指定一个多色的 icon 其中一部分的颜色
{: id="20201202172808-9gvo3cq"}

---

## ((20201202223627-c71xiqq "tailwind CSS")) 的 ui 开发工具
{: id="20201202223601-myu1ak0"}

[UI Devtools for Tailwind CSS (ui-devtools.com)](https://ui-devtools.com/)
{: id="20201202223548-ka93rt2"}

---

## #react/router# 获取当前路由的 child (子路由) 选中的那一个 router
{: id="20201204144054-y56w3kq"}

```typescript
  /** 通过在后面添加 :f 来匹配当前选中的子路由 */
  const match = useRouteMatch(/** 当前路由的路径 */ route?.path + '/:f')
  console.log('[match]', match)
```
{: id="20201204144146-3m7mqvd"}

---

{: id="20201209153952-v8y0aa4"}

### typescript enum 获取 key 的类型 type
{: id="20201209153952-kahknds"}

![image.png](assets/20201209154026-9huc5aa-image.png)
{: id="20201209154009-1vi3167"}

```typescript
export enum saveStatus {
  editing,
  error,
  warn,
  save,
}

type a = keyof typeof saveStatus
```
{: id="20201209154017-boknic8"}

### ts 枚举的零值导致的隐式转换问题
{: id="20201209154107-cdlanko"}

例如我们有上面 `saveStaus ` 这个枚举变量
{: id="20201209154135-2p3osiz"}

然后我们写出了如下代码
{: id="20201209154223-ulprwnx"}

```typescript
function test(s?: saveStatus) {
  if (s) {
      console.log(s, saveStatus.error)
  }
  console.log(s || saveStatus.error)
}
```
{: id="20201209154238-92ix4if"}

这里有两个错误，思考下
{: id="20201209154148-05u8ey3"}

{: id="20201209160137-7xwo9c5"}

{: id="20201209160137-a7a2zcf"}

{: id="20201209160136-3xysffg"}

{: id="20201209154548-fbuji35"}

1. {: id="20201209154833-kv1u69p"}if 的本意是想判断 s 有没有被传入，但当输入是这样的时候 `test(saveStatus.editing)` 就出现了问题，因为 enum 的性质 `saveStatus.editing` 的值是 `0` 这个 if 就没有符合我们的本意了。
   1. {: id="20201209155431-fs0agwk"}需要修正的话条件应该改成 `s !== undefined`
   {: id="20201209155432-gr08lxb"}
2. {: id="20201209155507-ov3ohex"}`console.log(s || saveStatus.error)` 的本意也是想在 `s` 没有被传入的时候有一个兜底的值，但和1的问题一样，`saveStatus.editing`的值是`0`导致他打印的是 `saveStatus.error` 而非预想的 s
{: id="20201209154831-nvd8xmu"}

这两个问题都是 `0` 的问题，而 `0` 来自于 `enum` 第一项是从零开始这个规定，所以我们想要优雅的解决这样问题的话最后的方案就是让他的第一项不是从零开始就行了
{: id="20201209155709-67ovbky"}

```typescript
enum saveStatus {
  editing = 1,
  error,
  warn,
  save,
}
```
{: id="20201209155917-v24mf5l"}

把这个 `saveStatus` 再代入上面的代码中就符合我们的预期了~ 🎉
{: id="20201209155852-jyi53pv"}

结论： **使用 enum 最好将第一项设置为 1**
{: id="20201209160032-st61uo4"}

{: id="20201209154923-kvo51o1"}
