# 八月

- pubdate:2020-08-06 18:11:24
- tags:每日总结

---

> 上个月都没在自己的博客写啥，罪过罪过。

## 2020-8-6

### js 复制文本到剪贴版

很简单，copy 既可用，需要注意 **copy 函数的调用需在用户点击的回调函数中** ，不过你可以在 devTools 中使用 copy 函数尝试效果（已经注入本页面全局环境了，你无需再复制执行一次）

```javascript {run}
var copy = (str) => {
  const input = document.createElement("textarea");
  input.style.opacity = "0";
  document.body.appendChild(input);
  input.value = str;
  input.select();
  const r = document.execCommand("copy");
  input.remove();
  return r;
};
```

也可以在下面尝试效果

```html {run}
<input class="c-test-input border"></input>
<div class="m-1 flex">
    <div class="c-test-btn_1 btn w-24 mx-2">复制</div>
    <div class="c-test-btn_2 btn w-24 mx-2">异步复制</div>
</div>

<script>
const input=document.querySelector('.c-test-input')
document.querySelector('.c-test-btn_1').addEventListener("click",()=>{
    copy(input.value)
})
document.querySelector('.c-test-btn_2').addEventListener("click",()=>{
    setTimeout(() => {
        copy(input.value)
    }, 1000);
})
</script>
```


{: id="20201104153359-w6wvqcs" type="doc"}
