<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta
      name="description"
      content="崮生的学习笔记记录站点，在这里将涉及到有关编程的一些知识。
	  其中大部分是关于ECMAScript的"
    />
    <meta baidu-gxt-verify-token="6c7b8ed28c794c77076efaf51af4593e" title="百度观测" />
    <meta name="google-site-verification" content="zryWPE68mHndlirad-4TTJ5WwbpROalM2XmIv9VU3Oo" />
    <meta name="baidu-site-verification" content="ZtTgMLojrB" />
    <meta name="theme-color" content="#673ab8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="generator" content="{{system.name}} {{system.version}}" />
    <meta name="theme" content="{{theme.name}} {{theme.version}}" />
    <title>崮生-{% block title%}{% endblock %}</title>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({
        google_ad_client: "ca-pub-7181140659254262",
        enable_page_level_ads: true,
      });
    </script>
    <link
      rel="stylesheet"
      href="https://unpkg.com/purecss@1.0.1/build/pure-min.css"
      integrity="sha384-oAOxQR6DkCoMliIh8yFnu25d7Eq/PHS21PClpwjOTeU2jRSq11vu66rf90/cZr47"
      crossorigin="anonymous"
    />
    {%- if config.touchIcon %}
    <link rel="apple-touch-icon" href="{{ config.touchIcon }}" />
    {%- endif %} {%- if config.feedurl %}
    <link
      rel="alternate"
      type="application/rss+xml"
      href="{{config.feedurl}}"
      title="{{config.sitename}}"
    />
    {%- endif %}
    <link rel="stylesheet" href="{{static_url('one.css')}}" />
    {%- block afterstyle %}{% endblock %} {%- if config.google %}
    <!-- <script type="text/javascript">
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', '{{config.google}}']);
		_gaq.push(['_trackPageview']);
		_gaq.push(['_trackPageLoadTime']);
	</script> -->
    {%- endif %}
    <link rel="shortcut icon" href="{{ static_url('favicon.ico') }}" type="image/x-icon" />
    <link rel="stylesheet" href="{{ static_url('default.min.css') }}" />
    <!-- Global site tag (gtag.js) -  -->
    <script
      async
      des="Google Analytics"
      src="https://www.googletagmanager.com/gtag/js?id=UA-139738006-1"
    ></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());
      gtag("config", "UA-139738006-1");
    </script>
    <script
      title="vscode的编辑器的加载"
      src="/node_modules/monaco-editor/min/vs/loader.js"
    ></script>
    <script title="require ts 的改造">
      /** 需要模块有一个默认输出回调才能起到效用 export default */
      function requireTs(filepath, fun) {
        var pathname = decodeURIComponent(location.pathname);
        var fileName = pathname.match(/(.+)(\/.*)/)[2];
        var current_path = "/build-ts/content" + pathname.replace(fileName, "/");
        require(filepath.map((path) => {
          if (/\.ts$/.test(path)) {
            /** 如果是ts文件 */
            path = path.replace(/^\.\//, current_path);
            path = path.replace(/\.ts$/, "");
          }
          return path;
        }), fun);
      }
    </script>
  </head>

  <body>
    <div class="header">
      <div class="container">
        <div class="brand">
          <a class="home" href="{{content_url('index.html')}}">{{config.sitename}}</a>
          {%- if config.tagline %} - <span class="tagline">{{ config.tagline }}</span>
          {%- endif %}
        </div>
        {%- if config.navigation %}
        <div class="menu" role="navigation">
          {%- for item in config.navigation %}
          <a href="{{content_url(item.link)}}">{{item.title}}</a>
          {%- endfor %}

          <div id="gcse-search" title="调用google来搜索本站">
            <script
              async
              src="https://cse.google.com/cse.js?cx=002678755313322921676:9sk6ox6pg2f"
            ></script>
            <div class="gcse-search"></div>
          </div>
        </div>
        {%- endif %}
      </div>
    </div>
    <div class="document yue">
      {%- block document %} {%- endblock %}
    </div>
    <div class="footer" style="clear: both;">
      {%- if config.footer %} {{config.footer}} {%- endif %} {%- if not config.hideNico %}
      <p class="copyright">
        powered by <a href="{{system.homepage}}">{{system.name}}</a> {{system.version}}
      </p>
      {%- endif %}
      <a href="https://shenzilong.cn/blog/feed">
        <img style="height: 16px" src="{{ static_url('feed.png') }}" alt="rss订阅" />
      </a>
      <!-- 底部谷歌广告单元 -->
      <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
      <ins
        class="adsbygoogle"
        style="display:block"
        data-ad-client="ca-pub-7181140659254262"
        data-ad-slot="9720207698"
        data-ad-format="auto"
        data-full-width-responsive="true"
      ></ins>
      <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
      </script>
      <!-- 底部谷歌广告单元 -->
    </div>
    {%- if config.github %}
    <div class="github">
      <a class="github-link" href="{{config.github}}" title="存放一些我的代码">代码库-git</a>
    </div>
    {%- endif %}
    <script src="{{ static_url('one.js') }}"></script>
  </body>
</html>
<script>
  /** 高亮代码块 */
  if (document.querySelector("pre") !== null) {
    require.config({ paths: { vs: "/node_modules/monaco-editor/min/vs" } });
    require(["vs/editor/editor.main"], function() {
      document.querySelectorAll("pre").forEach(function(el) {
        var div = document.createElement("div");
        var editor = monaco.editor.create(div, {
          value: el.innerText,
          language: getLanguage(el),
          //代码略缩图
          minimap: {
            enabled: false,
          },
          theme: "vs",
          automaticLayout: true,
          scrollBeyondLastLine: false,
        });
        /** 这个高度的算法是因为vs的行高为19而原来的行高为28 */
        let lines = el.offsetHeight / 27;
        if (lines > 20) lines = 20;
        div.style = `
					height:${lines * 19 + "px"};
					width: 100%;
					margin-bottom: 10px;
				`;
        if (getLanguage(el) === "javascript" || getLanguage(el) === "js") {
          var tool_bar = document.createElement("div");
          tool_bar.classList.add(".tool_bar");
          tool_bar.classList.add("tool-bar");
          tool_bar.style = `font-size:60%;position: relative;`;
          tool_bar.innerHTML = `<button class="run pure-button pure-button-primary button-xsmall" style="
						position: absolute;
						z-index: 1;
						right: 8px;
						top: -32px;
					">▷</button>`;
          div.appendChild(tool_bar);

          tool_bar.querySelector(".run").addEventListener("click", () => {
            eval(editor.getValue());
          });
        }

        el.parentElement.insertBefore(div, el);
        const code_el = div.parentElement.previousElementSibling;
        if (div.querySelector(".tool_bar") && code_el.tagName !== "SCRIPT") {
          /** 这些是不可执行的代码 */
          div.querySelector(".tool_bar").style.display = "none";
        }
        el.style.display = "none"; /** 隐藏原来的那些代码块 */
        editor.onDidChangeModelContent((e) => {
          if (code_el.classList.contains("nico-insert-code") || code_el.tagName === "STYLE") {
            code_el.innerHTML = editor.getValue();
          }
          let lines = editor.getModel().getLinesContent().length;
          if (lines > 20) lines = 20;
          div.style.height = lines * 19 + "px";
        });
      });
    });
  }
  function getLanguage(el) {
    var language = el.getAttribute("language");
    /** 去除后面的+号 */
    return language.replace(/\+$/, "");
  }
  window.addEventListener("load", function() {
    //因为md文档中直接链接到其他文件会导致没有.html 后缀然后访问不到资源，故出此下策
    let href = Array.from(document.querySelectorAll("p a[href]"));
    let yearReg = new RegExp(location.origin + "\/\\d\\d\\d\\d(.*)");
    href.forEach((v) => {
      //去除 2019 这样的年份中缀
      if (yearReg.test(v.href)) v.href = location.origin + v.href.match(yearReg)[1];
    });
  });
  (() => {
    var title = document.title;
    var i = 0;
    setInterval(function() {
      i = (i + 1) % 8;
      document.title = title + [..."🌑🌒🌓🌔🌝🌖🌗🌘"][i];
    }, 360);
  })();
</script>

<script title="百度自动推送">
  (function() {
    var bp = document.createElement("script");
    var curProtocol = window.location.protocol.split(":")[0];
    if (curProtocol === "https") {
      bp.src = "https://zz.bdstatic.com/linksubmit/push.js";
    } else {
      bp.src = "http://push.zhanzhang.baidu.com/push.js";
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
  })();
  //百度统计
  var _hmt = _hmt || [];
  (function() {
    var hm = document.createElement("script");
    hm.src = "https://hm.baidu.com/hm.js?65b233cad1f8e842306698cecb350624";
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(hm, s);
  })();
</script>
