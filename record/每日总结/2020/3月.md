# 3 月

- pubdate:2020-03-25 08:46:12
- tags:总结,日记

---

## 2020-3-24

1. 写 css 的一些思考
   1. 关于命名，所有强耦合的类名应当加前缀以做区分，例如「c-」。使用「-」分割层次,例如「c-header」，单词之间使用「\_」分隔例如 「c-header-top_left_avatar」。 、
   2. 关于 class 属性中类名的排序，因为我一般不使用 id 都是使用 class ，所以用来表示这个元素的类名放在最前，其次是在当前作用域（例如自己划分一个模块，然后这个模块专享的样式），再其次为全局自定义样式，最后是框架提供的样式
   3. scss 的帮助，可以利用 scss 的 「&」符号来更好的划分层级
2. 在回去的路上背下了 《太上老君说常清净经》

## 2020-3-25

1. 深入的了解了一下 css 的 transition 属性可以很简单的做一些动画
2. [贝塞尔曲线绘制工具](https://cubic-bezier.com/) 用来制作动画非常好
3. 强化对 js 操作 iframe 的记忆 , 只要是同域可可以随便操作

   ```javascript
   Array.from(document.getElementsByTagName("iframe"))
     /** 如果不是同域的 iframe 读取他的 contentDocument 属性得到的是 null  */
     .filter((d) => d.contentDocument)
     .forEach(({ contentDocument: dom }) => {
       console.log(dom.querySelectorAll("img"));
     });
   ```

4. 玩了一下 Matter.js 这个 2d 引擎库，还是很有意思的
5. rx.js v5 不像 v4 那样链式调用而是使用 pipe 这是为了优化模块加载。

## 2020-3-26

1. 尝试使用微信开发者工具的自动化功能来自动生成预览二维码给后端使用
   1. 接触到了 [ansi_up](https://github.com/drudru/ansi_up) 这个库，可用于将将包含 ANSI 颜色转义代码的文本转换为 HTML（终端输出的带颜色的文本就是使用了 ANSI ），这样可以比较方便的将终端输出的东西显示到 web 页面
2. 蓝湖可以导入 Axure 的文档，它的标注在蓝湖中全能看到

## 2020-3-30

1. 接触到了编辑距离算法，还没搞懂。但这个算法很好用。

## 2020-3-31

1. 实现了一个后台配置的功能，开发人员可以随意的添加配置项。然后管理人员可以修改配置
2. 发现了 svelte 中文网 https://www.sveltejs.cn/ 目前还没有汉化的很完全

## 2020-4-31

1. 昨天那个配置项的实现过于复杂了，今天将她优化了一下

   1. definition.ts 定义了类型和一个查找元素的方法

```typescript
export enum value_type {
  "string",
  "img",
  /** 嵌套 config_group 这个难度高一点，可以以后实现 */
  "config_group",
}

type Config_base = { title: string; description: string };

export type Config_item =
  | (Config_base & {
      type: value_type.string;
      value: string;
    })
  | (Config_base & {
      type: value_type.config_group;
      value: Config_item[];
    });

/** 根据路径查找元素 */
export function find_item(path: string, json: Config_item[] | Config_item): Config_item | undefined | Error {
  const path_list = path.split(" ");
  const cur_selector = path_list.shift();
  if (!cur_selector) {
    return undefined;
  }

  if (Array.isArray(json)) {
    if (cur_selector.startsWith("#")) {
      // 根据 title 查询
      const title = cur_selector.replace("#", "");

      const cur = json.find((el) => el.title === title);
      if (path_list.length === 0) {
        return cur;
      } else {
        return find_item(path_list.join(" "), cur!);
      }
    } else {
      return undefined;
    }
  } else {
    if (/** 嵌套类型 */ [value_type.config_group].includes(json.type)) {
      if ((json.type = value_type.config_group)) {
        return find_item([cur_selector, ...path_list].join(" "), json.value);
      } else {
        return new Error("新的嵌套类型要写新的处理方法");
      }
    } else if (json.type === value_type.string) {
      if (path_list.length === 0) {
        return json;
      } else {
        return new Error("路径错误");
      }
    } else {
      // 有新的类型和逻辑应当在这里实现
      return undefined;
    }
  }
}
```

2.  config_item.vue 配置项的组件

```vue
<template>
  <div class="c-item">
    <div :class="{ 'c-title': config_item.type == value_type.config_group }">{{ config_item.title }}</div>
    <div class="c-des">{{ config_item.description }}</div>

    <div>
      <div v-if="config_item.type == value_type.config_group">
        <configItem v-model="item.value" :config_item="item" v-for="(item, index) in config_item.value" :key="index" />
      </div>
      <input v-model="config_item.value" v-else-if="config_item.type == value_type.string" type="text" />
    </div>
  </div>
</template>
<script lang="ts">
import Vue from "vue";

import { Config_item, value_type } from "../definition";
export default Vue.extend({
  name: "configItem",
  props: {
    config_item: {
      type: Object as () => Config_item,
    },
    value: [Object, String, Number, Array],
  },
  model: {
    prop: "value",
    event: "value",
  },
  data() {
    return {
      value_type,
    };
  },
});
</script>
<style scope>
.c-item {
  margin-top: 0.258rem;
  margin-left: 1rem;
}
.c-title {
  font-size: 1.3rem;
  font-weight: 600;
}
.c-des {
  color: gray;
}
</style>
```

3. 发现 typescript Playground 出 v3 版了 [Playground V3](https://www.typescriptlang.org/v2/en/play) 里面还有许多帮助理解的例子